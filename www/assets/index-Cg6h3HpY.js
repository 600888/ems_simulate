const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Device-B7U8hgAn.js","./Device.vue_vue_type_style_index_0_scoped_83bfaf52_lang-B5Cw9Ru0.js","./Device-wJR6Wt24.css"])))=>i.map(i=>d[i]);
import{b as Hn,a as se,i as Nt,_ as W,d as L,u as tt,c as X,r as $,o as Ce,e as I,f as w,g as A,h as m,n as D,p as ue,j as V,k as ne,l as Ae,m as x,q as B,w as k,s as ze,E as le,t as he,v as ye,x as Ie,y as $e,z as zn,T as jn,A as xn,B as P,C as de,D as Et,F as Le,G as ve,H as Oe,I as qn,J as q,K as $t,L as re,M as Q,N as y,O as Wn,P as Yn,Q as Me,R as Jn,S as dt,U as te,V as U,W as Ye,X as Xn,Y as Zn,Z as nt,$ as St,a0 as _e,a1 as Qn,a2 as rn,a3 as eo,a4 as dn,a5 as ee,a6 as ce,a7 as cn,a8 as Mt,a9 as to,aa as un,ab as no,ac as ot,ad as pn,ae as Se,af as Je,ag as oo,ah as Ne,ai as fn,aj as ao,ak as ut,al as pt,am as be,an as Fe,ao as Pe,ap as oe,aq as lo,ar as Ut,as as He,at as ct,au as so,av as Be,aw as Ve,ax as ke,ay as ro,az as io,aA as co,aB as Dt,aC as uo,aD as Xe,aE as hn,aF as It,aG as Ue,aH as ft,aI as po,aJ as fo,aK as ho,aL as mo,aM as vo,aN as Tt,aO as ht,aP as at,aQ as mn,aR as go,aS as yo,aT as Ze,aU as bo,aV as Gt,aW as mt,aX as Ht,aY as ko,aZ as Co,a_ as _o,a$ as Qe,b0 as zt,b1 as jt,b2 as we,b3 as wo,b4 as vt,b5 as Z,b6 as gt,b7 as No,b8 as Eo,b9 as yt,ba as $o,bb as So,bc as Do,bd as Kt,be as lt,bf as Ot,bg as Io,bh as To,bi as Ko,bj as Oo,bk as Po,bl as Ro,bm as pe,bn as Pt,bo as vn,bp as gn,bq as ge,br as Fo,bs as Bo,bt as Vo,bu as Ao,bv as xt,bw as Lo,bx as Mo,by as Uo,bz as Go,bA as Ho}from"./Device.vue_vue_type_style_index_0_scoped_83bfaf52_lang-B5Cw9Ru0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var zo=1,jo=4;function qt(e){return Hn(e,zo|jo)}const yn=Symbol("breadcrumbKey"),xo=se({separator:{type:String,default:"/"},separatorIcon:{type:Nt}}),qo=["aria-label"],Wo=L({name:"ElBreadcrumb",__name:"breadcrumb",props:xo,setup(e){const{t}=tt(),n=e,a=X("breadcrumb"),o=$();return ue(yn,n),Ce(()=>{const l=o.value.querySelectorAll(`.${a.e("item")}`);l.length&&l[l.length-1].setAttribute("aria-current","page")}),(l,s)=>(w(),I("div",{ref_key:"breadcrumb",ref:o,class:D(m(a).b()),"aria-label":m(t)("el.breadcrumb.label"),role:"navigation"},[A(l.$slots,"default")],10,qo))}});var Yo=W(Wo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const Jo=se({to:{type:V([String,Object]),default:""},replace:Boolean}),Xo=L({name:"ElBreadcrumbItem",__name:"breadcrumb-item",props:Jo,setup(e){const t=e,n=Ae(),a=ne(yn,void 0),o=X("breadcrumb"),l=n.appContext.config.globalProperties.$router,s=()=>{!t.to||!l||(t.replace?l.replace(t.to):l.push(t.to))};return(d,u)=>{var c,v;return w(),I("span",{class:D(m(o).e("item"))},[x("span",{class:D([m(o).e("inner"),m(o).is("link",!!d.to)]),role:"link",onClick:s},[A(d.$slots,"default")],2),(c=m(a))!=null&&c.separatorIcon?(w(),B(m(le),{key:0,class:D(m(o).e("separator"))},{default:k(()=>[(w(),B(ze(m(a).separatorIcon)))]),_:1},8,["class"])):(w(),I("span",{key:1,class:D(m(o).e("separator")),role:"presentation"},he((v=m(a))==null?void 0:v.separator),3))],2)}}});var bn=W(Xo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const Zo=ye(Yo,{BreadcrumbItem:bn}),Qo=Ie(bn),ea=L({name:"ElCollapseTransition",__name:"collapse-transition",setup(e){const t=X("collapse-transition"),n=o=>{o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom},a={beforeEnter(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.style.height&&(o.dataset.elExistsHeight=o.style.height),o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0},enter(o){requestAnimationFrame(()=>{o.dataset.oldOverflow=o.style.overflow,o.dataset.elExistsHeight?o.style.maxHeight=o.dataset.elExistsHeight:o.scrollHeight!==0?o.style.maxHeight=`${o.scrollHeight}px`:o.style.maxHeight=0,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom,o.style.overflow="hidden"})},afterEnter(o){o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow},enterCancelled(o){n(o)},beforeLeave(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.dataset.oldOverflow=o.style.overflow,o.style.maxHeight=`${o.scrollHeight}px`,o.style.overflow="hidden"},leave(o){o.scrollHeight!==0&&(o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0)},afterLeave(o){n(o)},leaveCancelled(o){n(o)}};return(o,l)=>(w(),B(jn,$e({name:m(t).b()},zn(a)),{default:k(()=>[A(o.$slots,"default")]),_:3},16,["name"]))}});var ta=W(ea,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);const na=ye(ta),oa=L({name:"ElContainer",__name:"container",props:se({direction:{type:String,values:["horizontal","vertical"]}}),setup(e){const t=e,n=xn(),a=X("container"),o=P(()=>t.direction==="vertical"?!0:t.direction==="horizontal"?!1:n&&n.default?n.default().some(s=>{const d=s.type.name;return d==="ElHeader"||d==="ElFooter"}):!1);return(l,s)=>(w(),I("section",{class:D([m(a).b(),m(a).is("vertical",o.value)])},[A(l.$slots,"default")],2))}});var aa=W(oa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const la=L({name:"ElAside",__name:"aside",props:{width:{type:String,default:null}},setup(e){const t=e,n=X("aside"),a=P(()=>t.width?n.cssVarBlock({width:t.width}):{});return(o,l)=>(w(),I("aside",{class:D(m(n).b()),style:de(a.value)},[A(o.$slots,"default")],6))}});var kn=W(la,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const sa=L({name:"ElFooter",__name:"footer",props:{height:{type:String,default:null}},setup(e){const t=e,n=X("footer"),a=P(()=>t.height?n.cssVarBlock({height:t.height}):{});return(o,l)=>(w(),I("footer",{class:D(m(n).b()),style:de(a.value)},[A(o.$slots,"default")],6))}});var Cn=W(sa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const ra=L({name:"ElHeader",__name:"header",props:{height:{type:String,default:null}},setup(e){const t=e,n=X("header"),a=P(()=>t.height?n.cssVarBlock({height:t.height}):{});return(o,l)=>(w(),I("header",{class:D(m(n).b()),style:de(a.value)},[A(o.$slots,"default")],6))}});var _n=W(ra,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const ia=L({name:"ElMain",__name:"main",setup(e){const t=X("main");return(n,a)=>(w(),I("main",{class:D(m(t).b())},[A(n.$slots,"default")],2))}});var wn=W(ia,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const da=ye(aa,{Aside:kn,Footer:Cn,Header:_n,Main:wn}),ca=Ie(kn);Ie(Cn);const ua=Ie(_n),pa=Ie(wn),fa=L({inheritAttrs:!1});function ha(e,t,n,a,o,l){return A(e.$slots,"default")}var ma=W(fa,[["render",ha],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const va=L({name:"ElCollectionItem",inheritAttrs:!1});function ga(e,t,n,a,o,l){return A(e.$slots,"default")}var ya=W(va,[["render",ga],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const Nn="data-el-collection-item",ba=e=>{const t=`El${e}Collection`,n=`${t}Item`,a=Symbol(t),o=Symbol(n),l=Object.assign({},ma,{name:t,setup(){const d=$(),u=new Map;ue(a,{itemMap:u,getItems:()=>{const v=m(d);if(!v)return[];const g=Array.from(v.querySelectorAll(`[${Nn}]`));return[...u.values()].sort((f,r)=>g.indexOf(f.ref)-g.indexOf(r.ref))},collectionRef:d})}}),s=Object.assign({},ya,{name:n,setup(d,{attrs:u}){const c=$(),v=ne(a,void 0);ue(o,{collectionItemRef:c}),Ce(()=>{const g=m(c);g&&v.itemMap.set(g,{ref:g,...u})}),Et(()=>{const g=m(c);v.itemMap.delete(g)})}});return{COLLECTION_INJECTION_KEY:a,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:l,ElCollectionItem:s}},ka=se({style:{type:V([String,Array,Object])},currentTabId:{type:V(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:V(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ca,ElCollectionItem:_a,COLLECTION_INJECTION_KEY:En,COLLECTION_ITEM_INJECTION_KEY:wa}=ba("RovingFocusGroup"),Rt=Symbol("elRovingFocusGroup"),$n=Symbol("elRovingFocusGroupItem"),Na={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Ea=(e,t)=>e,$a=(e,t,n)=>{const a=Le(e),o=Ea(a);return Na[o]},Sa=(e,t)=>e.map((n,a)=>e[(a+t)%e.length]),Wt=e=>{const{activeElement:t}=document;for(const n of e)if(n===t||(n.focus(),t!==document.activeElement))return},Yt="currentTabIdChange",Jt="rovingFocusGroup.entryFocus",Da={bubbles:!1,cancelable:!0},Ia=L({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:ka,emits:[Yt,"entryFocus"],setup(e,{emit:t}){var n;const a=$((n=e.currentTabId||e.defaultCurrentTabId)!=null?n:null),o=$(!1),l=$(!1),s=$(),{getItems:d}=ne(En,void 0),u=P(()=>[{outline:"none"},e.style]),c=h=>{t(Yt,h)},v=()=>{o.value=!0},g=ve(h=>{var C;(C=e.onMousedown)==null||C.call(e,h)},()=>{l.value=!0}),p=ve(h=>{var C;(C=e.onFocus)==null||C.call(e,h)},h=>{const C=!m(l),{target:E,currentTarget:_}=h;if(E===_&&C&&!m(o)){const b=new Event(Jt,Da);if(_?.dispatchEvent(b),!b.defaultPrevented){const O=d().filter(F=>F.focusable),H=O.find(F=>F.active),S=O.find(F=>F.id===m(a)),T=[H,S,...O].filter(Boolean).map(F=>F.ref);Wt(T)}}l.value=!1}),f=ve(h=>{var C;(C=e.onBlur)==null||C.call(e,h)},()=>{o.value=!1}),r=(...h)=>{t("entryFocus",...h)},i=h=>{const C=$a(h);if(C){h.preventDefault();let _=d().filter(b=>b.focusable).map(b=>b.ref);switch(C){case"last":{_.reverse();break}case"prev":case"next":{C==="prev"&&_.reverse();const b=_.indexOf(h.currentTarget);_=e.loop?Sa(_,b+1):_.slice(b+1);break}}re(()=>{Wt(_)})}};ue(Rt,{currentTabbedId:qn(a),loop:Oe(e,"loop"),tabIndex:P(()=>m(o)?-1:0),rovingFocusGroupRef:s,rovingFocusGroupRootStyle:u,orientation:Oe(e,"orientation"),dir:Oe(e,"dir"),onItemFocus:c,onItemShiftTab:v,onBlur:f,onFocus:p,onMousedown:g,onKeydown:i}),q(()=>e.currentTabId,h=>{a.value=h??null}),$t(s,Jt,r)}});function Ta(e,t,n,a,o,l){return A(e.$slots,"default")}var Ka=W(Ia,[["render",Ta],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const Oa=L({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ca,ElRovingFocusGroupImpl:Ka}});function Pa(e,t,n,a,o,l){const s=Q("el-roving-focus-group-impl"),d=Q("el-focus-group-collection");return w(),B(d,null,{default:k(()=>[y(s,Wn(Yn(e.$attrs)),{default:k(()=>[A(e.$slots,"default")]),_:3},16)]),_:3})}var Ra=W(Oa,[["render",Pa],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Fa=se({trigger:{...dt.trigger,type:V([String,Array])},triggerKeys:{type:V(Array),default:()=>[te.enter,te.numpadEnter,te.space,te.down]},virtualTriggering:dt.virtualTriggering,virtualRef:dt.virtualRef,effect:{...Me.effect,default:"light"},type:{type:V(String)},placement:{type:V(String),default:"bottom"},popperOptions:{type:V(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:V([Number,String]),default:0},maxHeight:{type:V([Number,String]),default:""},popperClass:Me.popperClass,popperStyle:Me.popperStyle,disabled:Boolean,role:{type:String,values:Jn,default:"menu"},buttonProps:{type:V(Object)},teleported:Me.teleported,appendTo:Me.appendTo,persistent:{type:Boolean,default:!0}}),Sn=se({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Nt}}),Ba=se({onKeydown:{type:V(Function)}}),st=Symbol("elDropdown"),Dn="elDropdown",{ButtonGroup:Va}=_e,Aa=L({name:"ElDropdown",components:{ElButton:_e,ElButtonGroup:Va,ElScrollbar:St,ElTooltip:nt,ElRovingFocusGroup:Ra,ElOnlyChild:Zn,ElIcon:le,ArrowDown:Xn},props:Fa,emits:["visible-change","click","command"],setup(e,{emit:t}){const n=Ae(),a=X("dropdown"),{t:o}=tt(),l=$(),s=$(),d=$(),u=$(),c=$(null),v=$(null),g=$(!1),p=P(()=>({maxHeight:Qn(e.maxHeight)})),f=P(()=>[a.m(b.value)]),r=P(()=>eo(e.trigger)),i=dn().value,h=P(()=>e.id||i);function C(){var z;(z=d.value)==null||z.onClose(void 0,0)}function E(){var z;(z=d.value)==null||z.onClose()}function _(){var z;(z=d.value)==null||z.onOpen()}const b=rn();function O(...z){t("command",...z)}function H(){}function S(){const z=m(u);r.value.includes("hover")&&z?.focus({preventScroll:!0}),v.value=null}function M(z){v.value=z}function T(){t("visible-change",!0)}function F(z){var ie;g.value=z?.type==="keydown",(ie=u.value)==null||ie.focus()}function Y(){t("visible-change",!1)}return ue(st,{contentRef:u,role:P(()=>e.role),triggerId:h,isUsingKeyboard:g,onItemEnter:H,onItemLeave:S,handleClose:E}),ue(Dn,{instance:n,dropdownSize:b,handleClick:C,commandHandler:O,trigger:Oe(e,"trigger"),hideOnClick:Oe(e,"hideOnClick")}),{t:o,ns:a,scrollbar:c,wrapStyle:p,dropdownTriggerKls:f,dropdownSize:b,triggerId:h,currentTabId:v,handleCurrentTabIdChange:M,handlerMainButtonClick:z=>{t("click",z)},handleClose:E,handleOpen:_,handleBeforeShowTooltip:T,handleShowTooltip:F,handleBeforeHideTooltip:Y,popperRef:d,contentRef:u,triggeringElementRef:l,referenceElementRef:s}}});function La(e,t,n,a,o,l){var s;const d=Q("el-roving-focus-group"),u=Q("el-scrollbar"),c=Q("el-only-child"),v=Q("el-tooltip"),g=Q("el-button"),p=Q("arrow-down"),f=Q("el-icon"),r=Q("el-button-group");return w(),I("div",{class:D([e.ns.b(),e.ns.is("disabled",e.disabled)])},[y(v,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":e.trigger==="hover"?e.showTimeout:0,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"virtual-ref":(s=e.virtualRef)!=null?s:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,"append-to":e.appendTo,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Ye({content:k(()=>[y(u,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:k(()=>[y(d,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:k(()=>[A(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:k(()=>[y(c,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:k(()=>[A(e.$slots,"default")]),_:3},8,["id","tabindex"])]),key:"0"}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","append-to","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(w(),B(r,{key:0},{default:k(()=>[y(g,$e({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:k(()=>[A(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),y(g,$e({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:k(()=>[y(f,{class:D(e.ns.e("icon"))},{default:k(()=>[y(p)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):U("v-if",!0)],2)}var Ma=W(Aa,[["render",La],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const Ua=L({components:{ElRovingFocusCollectionItem:_a},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:t}){const{currentTabbedId:n,onItemFocus:a,onItemShiftTab:o,onKeydown:l}=ne(Rt,void 0),s=dn(),d=$(),u=ve(p=>{t("mousedown",p)},p=>{e.focusable?a(m(s)):p.preventDefault()}),c=ve(p=>{t("focus",p)},()=>{a(m(s))}),v=ve(p=>{t("keydown",p)},p=>{const{shiftKey:f,target:r,currentTarget:i}=p;if(Le(p)===te.tab&&f){o();return}r===i&&l(p)}),g=P(()=>n.value===m(s));return ue($n,{rovingFocusGroupItemRef:d,tabIndex:P(()=>m(g)?0:-1),handleMousedown:u,handleFocus:c,handleKeydown:v}),{id:s,handleKeydown:v,handleFocus:c,handleMousedown:u}}});function Ga(e,t,n,a,o,l){const s=Q("el-roving-focus-collection-item");return w(),B(s,{id:e.id,focusable:e.focusable,active:e.active},{default:k(()=>[A(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Ha=W(Ua,[["render",Ga],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const za=L({name:"DropdownItemImpl",components:{ElIcon:le},props:Sn,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:t}){const n=X("dropdown"),{role:a}=ne(st,void 0),{collectionItemRef:o}=ne(wa,void 0),{rovingFocusGroupItemRef:l,tabIndex:s,handleFocus:d,handleKeydown:u,handleMousedown:c}=ne($n,void 0),v=cn(o,l),g=P(()=>a.value==="menu"?"menuitem":a.value==="navigation"?"link":"button"),p=ve(f=>{const r=Le(f);if([te.enter,te.numpadEnter,te.space].includes(r))return f.preventDefault(),f.stopImmediatePropagation(),t("clickimpl",f),!0},u);return{ns:n,itemRef:v,dataset:{[Nn]:""},role:g,tabIndex:s,handleFocus:d,handleKeydown:p,handleMousedown:c}}}),ja=["aria-disabled","tabindex","role"];function xa(e,t,n,a,o,l){const s=Q("el-icon");return w(),I(ce,null,[e.divided?(w(),I("li",{key:0,role:"separator",class:D(e.ns.bem("menu","item","divided"))},null,2)):U("v-if",!0),x("li",$e({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:t[0]||(t[0]=d=>e.$emit("clickimpl",d)),onFocus:t[1]||(t[1]=(...d)=>e.handleFocus&&e.handleFocus(...d)),onKeydown:t[2]||(t[2]=ee((...d)=>e.handleKeydown&&e.handleKeydown(...d),["self"])),onMousedown:t[3]||(t[3]=(...d)=>e.handleMousedown&&e.handleMousedown(...d)),onPointermove:t[4]||(t[4]=d=>e.$emit("pointermove",d)),onPointerleave:t[5]||(t[5]=d=>e.$emit("pointerleave",d))}),[e.icon||e.$slots.icon?(w(),B(s,{key:0},{default:k(()=>[A(e.$slots,"icon",{},()=>[(w(),B(ze(e.icon)))])]),_:3})):U("v-if",!0),A(e.$slots,"default")],16,ja)],64)}var qa=W(za,[["render",xa],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const In=()=>{const e=ne(Dn,{}),t=P(()=>e?.dropdownSize);return{elDropdown:e,_elDropdownSize:t}},Wa=L({name:"ElDropdownItem",components:{ElRovingFocusItem:Ha,ElDropdownItemImpl:qa},inheritAttrs:!1,props:Sn,emits:["pointermove","pointerleave","click"],setup(e,{emit:t,attrs:n}){const{elDropdown:a}=In(),o=Ae(),{onItemEnter:l,onItemLeave:s}=ne(st,void 0),d=ve(g=>(t("pointermove",g),g.defaultPrevented),Mt(g=>{if(e.disabled){s(g);return}const p=g.currentTarget;p===document.activeElement||p.contains(document.activeElement)||(l(g),g.defaultPrevented||p?.focus({preventScroll:!0}))})),u=ve(g=>(t("pointerleave",g),g.defaultPrevented),Mt(s)),c=ve(g=>{if(!e.disabled)return t("click",g),g.type!=="keydown"&&g.defaultPrevented},g=>{var p,f,r;if(e.disabled){g.stopImmediatePropagation();return}(p=a?.hideOnClick)!=null&&p.value&&((f=a.handleClick)==null||f.call(a)),(r=a.commandHandler)==null||r.call(a,e.command,o,g)}),v=P(()=>({...e,...n}));return{handleClick:c,handlePointerMove:d,handlePointerLeave:u,propsAndAttrs:v}}});function Ya(e,t,n,a,o,l){const s=Q("el-dropdown-item-impl"),d=Q("el-roving-focus-item");return w(),B(d,{focusable:!e.disabled},{default:k(()=>[y(s,$e(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),Ye({default:k(()=>[A(e.$slots,"default")]),_:2},[e.$slots.icon?{name:"icon",fn:k(()=>[A(e.$slots,"icon")]),key:"0"}:void 0]),1040,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}var Tn=W(Wa,[["render",Ya],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const Ja=L({name:"ElDropdownMenu",props:Ba,setup(e){const t=X("dropdown"),{_elDropdownSize:n}=In(),a=n.value,{contentRef:o,role:l,triggerId:s,isUsingKeyboard:d,handleClose:u}=ne(st,void 0),{rovingFocusGroupRef:c,rovingFocusGroupRootStyle:v,onBlur:g,onFocus:p,onKeydown:f,onMousedown:r}=ne(Rt,void 0),{collectionRef:i}=ne(En,void 0),h=P(()=>[t.b("menu"),t.bm("menu",a?.value)]),C=cn(o,c,i),E=ve(b=>{var O;(O=e.onKeydown)==null||O.call(e,b)},b=>{const{currentTarget:O,target:H}=b,S=Le(b);if(O.contains(H),te.tab===S)return u();f(b)});function _(b){d.value&&p(b)}return{size:a,rovingFocusGroupRootStyle:v,dropdownKls:h,role:l,triggerId:s,dropdownListWrapperRef:C,handleKeydown:E,onBlur:g,handleFocus:_,onMousedown:r}}}),Xa=["role","aria-labelledby"];function Za(e,t,n,a,o,l){return w(),I("ul",{ref:e.dropdownListWrapperRef,class:D(e.dropdownKls),style:de(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:t[0]||(t[0]=(...s)=>e.handleFocus&&e.handleFocus(...s)),onFocusout:t[1]||(t[1]=(...s)=>e.onBlur&&e.onBlur(...s)),onKeydown:t[2]||(t[2]=ee((...s)=>e.handleKeydown&&e.handleKeydown(...s),["self"])),onMousedown:t[3]||(t[3]=ee((...s)=>e.onMousedown&&e.onMousedown(...s),["self"]))},[A(e.$slots,"default")],46,Xa)}var Kn=W(Ja,[["render",Za],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Qa=ye(Ma,{DropdownItem:Tn,DropdownMenu:Kn}),el=Ie(Tn),tl=Ie(Kn),nl=se({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:V(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:V([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:V(Function),default:e=>`${e}%`}}),ol=["aria-valuenow"],al={viewBox:"0 0 100 100"},ll=["d","stroke","stroke-linecap","stroke-width"],sl=["d","stroke","opacity","stroke-linecap","stroke-width"],rl={key:0},il=L({name:"ElProgress",__name:"progress",props:nl,setup(e){const t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=e,a=X("progress"),o=P(()=>{const _={width:`${n.percentage}%`,animationDuration:`${n.duration}s`},b=E(n.percentage);return b.includes("gradient")?_.background=b:_.backgroundColor=b,_}),l=P(()=>(n.strokeWidth/n.width*100).toFixed(1)),s=P(()=>["circle","dashboard"].includes(n.type)?Number.parseInt(`${50-Number.parseFloat(l.value)/2}`,10):0),d=P(()=>{const _=s.value,b=n.type==="dashboard";return`
          M 50 50
          m 0 ${b?"":"-"}${_}
          a ${_} ${_} 0 1 1 0 ${b?"-":""}${_*2}
          a ${_} ${_} 0 1 1 0 ${b?"":"-"}${_*2}
          `}),u=P(()=>2*Math.PI*s.value),c=P(()=>n.type==="dashboard"?.75:1),v=P(()=>`${-1*u.value*(1-c.value)/2}px`),g=P(()=>({strokeDasharray:`${u.value*c.value}px, ${u.value}px`,strokeDashoffset:v.value})),p=P(()=>({strokeDasharray:`${u.value*c.value*(n.percentage/100)}px, ${u.value}px`,strokeDashoffset:v.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),f=P(()=>{let _;return n.color?_=E(n.percentage):_=t[n.status]||t.default,_}),r=P(()=>n.status==="warning"?to:n.type==="line"?n.status==="success"?un:no:n.status==="success"?ot:pn),i=P(()=>n.type==="line"?12+n.strokeWidth*.4:n.width*.111111+2),h=P(()=>n.format(n.percentage));function C(_){const b=100/_.length;return _.map((H,S)=>Je(H)?{color:H,percentage:(S+1)*b}:H).sort((H,S)=>H.percentage-S.percentage)}const E=_=>{var b;const{color:O}=n;if(Se(O))return O(_);if(Je(O))return O;{const H=C(O);for(const S of H)if(S.percentage>_)return S.color;return(b=H[H.length-1])==null?void 0:b.color}};return(_,b)=>(w(),I("div",{class:D([m(a).b(),m(a).m(_.type),m(a).is(_.status),{[m(a).m("without-text")]:!_.showText,[m(a).m("text-inside")]:_.textInside}]),role:"progressbar","aria-valuenow":_.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[_.type==="line"?(w(),I("div",{key:0,class:D(m(a).b("bar"))},[x("div",{class:D(m(a).be("bar","outer")),style:de({height:`${_.strokeWidth}px`})},[x("div",{class:D([m(a).be("bar","inner"),{[m(a).bem("bar","inner","indeterminate")]:_.indeterminate},{[m(a).bem("bar","inner","striped")]:_.striped},{[m(a).bem("bar","inner","striped-flow")]:_.stripedFlow}]),style:de(o.value)},[(_.showText||_.$slots.default)&&_.textInside?(w(),I("div",{key:0,class:D(m(a).be("bar","innerText"))},[A(_.$slots,"default",{percentage:_.percentage},()=>[x("span",null,he(h.value),1)])],2)):U("v-if",!0)],6)],6)],2)):(w(),I("div",{key:1,class:D(m(a).b("circle")),style:de({height:`${_.width}px`,width:`${_.width}px`})},[(w(),I("svg",al,[x("path",{class:D(m(a).be("circle","track")),d:d.value,stroke:`var(${m(a).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":_.strokeLinecap,"stroke-width":l.value,fill:"none",style:de(g.value)},null,14,ll),x("path",{class:D(m(a).be("circle","path")),d:d.value,stroke:f.value,fill:"none",opacity:_.percentage?1:0,"stroke-linecap":_.strokeLinecap,"stroke-width":l.value,style:de(p.value)},null,14,sl)]))],6)),(_.showText||_.$slots.default)&&!_.textInside?(w(),I("div",{key:2,class:D(m(a).e("text")),style:de({fontSize:`${i.value}px`})},[A(_.$slots,"default",{percentage:_.percentage},()=>[_.status?(w(),B(m(le),{key:1},{default:k(()=>[(w(),B(ze(r.value)))]),_:1})):(w(),I("span",rl,he(h.value),1))])],6)):U("v-if",!0)],10,ol))}});var dl=W(il,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const cl=ye(dl),ul=se({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:oo,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),pl=L({name:"ElText",__name:"text",props:ul,setup(e){const t=e,n=$(),a=rn(),o=X("text"),l=P(()=>[o.b(),o.m(t.type),o.m(a.value),o.is("truncated",t.truncated),o.is("line-clamp",!Ne(t.lineClamp))]),s=()=>{var d,u,c,v,g,p,f;if(ao().title)return;let i=!1;const h=((d=n.value)==null?void 0:d.textContent)||"";if(t.truncated){const C=(u=n.value)==null?void 0:u.offsetWidth,E=(c=n.value)==null?void 0:c.scrollWidth;C&&E&&E>C&&(i=!0)}else if(!Ne(t.lineClamp)){const C=(v=n.value)==null?void 0:v.offsetHeight,E=(g=n.value)==null?void 0:g.scrollHeight;C&&E&&E>C&&(i=!0)}i?(p=n.value)==null||p.setAttribute("title",h):(f=n.value)==null||f.removeAttribute("title")};return Ce(s),fn(s),(d,u)=>(w(),B(ze(d.tag),{ref_key:"textRef",ref:n,class:D(l.value),style:de({"-webkit-line-clamp":d.lineClamp})},{default:k(()=>[A(d.$slots,"default")]),_:3},8,["class","style"]))}});var fl=W(pl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const hl=ye(fl),Re="$treeNodeId",Xt=function(e,t){!t||t[Re]||Object.defineProperty(t,Re,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Ft=(e,t)=>t?.[e||Re],bt=(e,t,n)=>{const a=e.value.currentNode;n();const o=e.value.currentNode;a!==o&&t("current-change",o?o.data:null,o)},On=e=>{let t=!0,n=!0,a=!0,o=!0;for(let l=0,s=e.length;l<s;l++){const d=e[l];(d.checked!==!0||d.indeterminate)&&(t=!1,d.disabled||(a=!1)),(d.checked!==!1||d.indeterminate)&&(n=!1),d.isEffectivelyChecked||(o=!1)}return{all:t,none:n,allWithoutDisable:a,half:!t&&!n,isEffectivelyChecked:o}},Ge=function(e){if(e.childNodes.length===0||e.loading){e.isEffectivelyChecked=e.disabled||e.checked;return}const{all:t,none:n,half:a,isEffectivelyChecked:o}=On(e.childNodes);e.isEffectivelyChecked=o,t?(e.checked=!0,e.indeterminate=!1):a?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const l=e.parent;!l||l.level===0||e.store.checkStrictly||Ge(l)},je=function(e,t){const n=e.store.props,a=e.data||{},o=n[t];if(Se(o))return o(a,e);if(Je(o))return a[o];if(Ne(o)){const l=a[t];return Ne(l)?"":l}},kt=function(e,t){e.forEach(n=>{n.canFocus=t,kt(n.childNodes,t)})};let ml=0;class Ee{constructor(t){this.isLeafByUser=void 0,this.isLeaf=void 0,this.isEffectivelyChecked=!1,this.id=ml++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)ut(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var t;const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const a=n.props;if(a&&typeof a.isLeaf<"u"){const s=je(this,"isLeaf");pt(s)&&(this.isLeafByUser=s)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),be(this.data)||Xt(this,this.data),!this.data)return;const o=n.defaultExpandedKeys,l=n.key;l&&!Fe(this.key)&&o&&o.includes(this.key)&&this.expand(null,n.autoExpandParent),l&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode&&(n.currentNode.isCurrent=!1),n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((t=this.parent)==null?void 0:t.expanded)===!0)&&(this.canFocus=!0)}setData(t){be(t)||Xt(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&be(this.data)?n=this.data:n=je(this,"children")||[];for(let a=0,o=n.length;a<o;a++)this.insertChild({data:n[a]})}get label(){return je(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return je(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(a=>a===t||n&&a.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,a){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof Ee)){if(!a){const o=this.getChildren(!0);o?.includes(t.data)||(Ne(n)||n<0?o?.push(t.data):o?.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=Pe(new Ee(t)),t instanceof Ee&&t.initialize()}t.level=this.level+1,Ne(n)||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let a;n&&(a=this.childNodes.indexOf(n)),this.insertChild(t,a)}insertAfter(t,n){let a;n&&(a=this.childNodes.indexOf(n),a!==-1&&(a+=1)),this.insertChild(t,a)}removeChild(t){const n=this.getChildren()||[],a=n.indexOf(t.data);a>-1&&n.splice(a,1);const o=this.childNodes.indexOf(t);o>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(t){const n=this.childNodes.find(a=>a.data===t);n&&this.removeChild(n)}expand(t,n){const a=()=>{if(n){let o=this.parent;for(;o&&o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,t&&t(),kt(this.childNodes,!0)};this.shouldLoadData()?this.loadData(o=>{be(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Ge(this),a())}):a()}doCreateChildren(t,n={}){t.forEach(a=>{this.insertChild(Object.assign({data:a},n),void 0,!0)})}collapse(){this.expanded=!1,kt(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser,this.isEffectivelyChecked=this.isLeaf&&this.disabled;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0,this.isEffectivelyChecked=this.isLeaf&&this.disabled;return}this.isLeaf=!1}setChecked(t,n,a,o){if(this.indeterminate=t==="half",this.checked=t===!0,this.isEffectivelyChecked=!this.childNodes.length&&(this.disabled||this.checked),this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const s=()=>{if(n){const d=this.childNodes;for(let g=0,p=d.length;g<p;g++){const f=d[g];o=o||t!==!1;const r=f.disabled&&f.isLeaf?f.checked:o;f.setChecked(r,n,!0,o)}const{half:u,all:c,isEffectivelyChecked:v}=On(d);c||(this.checked=c,this.indeterminate=u),this.isEffectivelyChecked=this.childNodes.length?v:this.disabled||this.checked}};if(this.shouldLoadData()){this.loadData(()=>{s(),Ge(this)},{checked:t!==!1});return}else s()}const l=this.parent;!l||l.level===0||a||Ge(l)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const a=this.store.props;let o="children";return a&&(o=a.children||"children"),Ne(n[o])&&(n[o]=null),t&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(l=>l.data),a={},o=[];t.forEach((l,s)=>{const d=l[Re];!!d&&n.some(c=>c?.[Re]===d)?a[d]={index:s,data:l}:o.push({index:s,data:l})}),this.store.lazy||n.forEach(l=>{a[l?.[Re]]||this.removeChildByData(l)}),o.forEach(({index:l,data:s})=>{this.insertChild({data:s},l)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const a=l=>{this.childNodes=[],this.doCreateChildren(l,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,l)},o=()=>{this.loading=!1};this.store.load(this,a,o)}else t&&t.call(this)}eachNode(t){const n=[this];for(;n.length;){const a=n.shift();n.unshift(...a.childNodes),t(a)}}reInitChecked(){this.store.checkStrictly||Ge(this)}}class vl{constructor(t){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const n in t)ut(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){if(this.root=new Ee({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()},oe)}else this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,a=this.lazy,o=async function(l){const s=l.root?l.root.childNodes:l.childNodes;for(const[d,u]of s.entries())u.visible=!!n?.call(u,t,u.data,u),d%80===0&&d>0&&await re(),await o(u);if(!l.visible&&s.length){let d=!0;d=!s.some(u=>u.visible),l.root?l.root.visible=d===!1:l.visible=d===!1}t&&l.visible&&!l.isLeaf&&(!a||l.loaded)&&l.expand()};o(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(t){if(t instanceof Ee)return t;const n=lo(t)?Ft(this.key,t):t;return this.nodesMap[n]||null}insertBefore(t,n){var a;const o=this.getNode(n);(a=o.parent)==null||a.insertBefore({data:t},o)}insertAfter(t,n){var a;const o=this.getNode(n);(a=o.parent)==null||a.insertAfter({data:t},o)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const a=Ut(n)?this.root:this.getNode(n);a&&a.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(a=>{const o=n[a];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){const n=this.defaultCheckedKeys||[];!Fe(t.key)&&n.includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;if(!(!t||!t.data))if(!n)this.nodesMap[t.id]=t;else{const a=t.key;Fe(a)||(this.nodesMap[a]=t)}}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(a=>{this.deregisterNode(a)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const a=[],o=function(l){(l.root?l.root.childNodes:l.childNodes).forEach(d=>{(d.checked||n&&d.indeterminate)&&(!t||t&&d.isLeaf)&&a.push(d.data),o(d)})};return o(this),a}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(l=>{l.indeterminate&&t.push(l.data),n(l)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const a in n)ut(n,a)&&t.push(n[a]);return t}updateChildren(t,n){const a=this.nodesMap[t];if(!a)return;const o=a.childNodes;for(let l=o.length-1;l>=0;l--){const s=o[l];this.remove(s.data)}for(let l=0,s=n.length;l<s;l++){const d=n[l];this.append(d,a.data)}}_setCheckedKeys(t,n=!1,a){const o=this._getAllNodes().sort((u,c)=>u.level-c.level),l=Object.create(null),s=Object.keys(a);o.forEach(u=>u.setChecked(!1,!1));const d=u=>{u.childNodes.forEach(c=>{var v;l[c.data[t]]=!0,(v=c.childNodes)!=null&&v.length&&d(c)})};for(let u=0,c=o.length;u<c;u++){const v=o[u],g=v.data[t].toString();if(!s.includes(g)){v.checked&&!l[g]&&v.setChecked(!1,!1);continue}if(v.childNodes.length&&d(v),v.isLeaf||this.checkStrictly){v.setChecked(!0,!1);continue}if(v.setChecked(!0,!0),n){v.setChecked(!1,!1);const f=function(r){r.childNodes.forEach(h=>{h.isLeaf||h.setChecked(!1,!1),f(h)})};f(v)}}}setCheckedNodes(t,n=!1){const a=this.key,o={};t.forEach(l=>{o[(l||{})[a]]=!0}),this._setCheckedKeys(a,n,o)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const a=this.key,o={};t.forEach(l=>{o[l]=!0}),this._setCheckedKeys(a,n,o)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const a=this.getNode(n);a&&a.expand(null,this.autoExpandParent)})}setChecked(t,n,a){const o=this.getNode(t);o&&o.setChecked(!!n,a)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){var a;const o=t[this.key],l=this.nodesMap[o];this.setCurrentNode(l),n&&this.currentNode&&this.currentNode.level>1&&((a=this.currentNode.parent)==null||a.expand(null,!0))}setCurrentNodeKey(t,n=!0){var a;if(this.currentNodeKey=t,Ut(t)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const o=this.getNode(t);o&&(this.setCurrentNode(o),n&&this.currentNode&&this.currentNode.level>1&&((a=this.currentNode.parent)==null||a.expand(null,!0)))}}const Bt="RootTree",Pn="NodeInstance",Zt="TreeNodeMap",gl=L({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=X("tree"),n=ne(Pn),a=ne(Bt);return()=>{const o=e.node,{data:l,store:s}=o;return e.renderContent?e.renderContent(He,{_self:n,node:o,data:l,store:s}):A(a.ctx.slots,"default",{node:o,data:l},()=>[He(hl,{tag:"span",truncated:!0,class:t.be("node","label")},()=>[o.label])])}}});var yl=W(gl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function Rn(e){const t=ne(Zt,null);let n={treeNodeExpand:a=>{var o;e.node!==a&&((o=e.node)==null||o.collapse())},children:new Set};return t&&t.children.add(n),Et(()=>{t&&t.children.delete(n),n=null}),ue(Zt,n),{broadcastExpanded:a=>{if(e.accordion)for(const o of n.children)o.treeNodeExpand(a)}}}const Fn=Symbol("dragEvents");function bl({props:e,ctx:t,el$:n,dropIndicator$:a,store:o}){const l=X("tree"),s=$({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return ue(Fn,{treeNodeDragStart:({event:v,treeNode:g})=>{if(v.dataTransfer){if(Se(e.allowDrag)&&!e.allowDrag(g.node))return v.preventDefault(),!1;v.dataTransfer.effectAllowed="move";try{v.dataTransfer.setData("text/plain","")}catch{}s.value.draggingNode=g,t.emit("node-drag-start",g.node,v)}},treeNodeDragOver:({event:v,treeNode:g})=>{if(!v.dataTransfer)return;const p=g,f=s.value.dropNode;f&&f.node.id!==p.node.id&&ct(f.$el,l.is("drop-inner"));const r=s.value.draggingNode;if(!r||!p)return;let i=!0,h=!0,C=!0,E=!0;Se(e.allowDrop)&&(i=e.allowDrop(r.node,p.node,"prev"),E=h=e.allowDrop(r.node,p.node,"inner"),C=e.allowDrop(r.node,p.node,"next")),v.dataTransfer.dropEffect=h||i||C?"move":"none",(i||h||C)&&f?.node.id!==p.node.id&&(f&&t.emit("node-drag-leave",r.node,f.node,v),t.emit("node-drag-enter",r.node,p.node,v)),i||h||C?s.value.dropNode=p:s.value.dropNode=null,p.node.nextSibling===r.node&&(C=!1),p.node.previousSibling===r.node&&(i=!1),p.node.contains(r.node,!1)&&(h=!1),(r.node===p.node||r.node.contains(p.node))&&(i=!1,h=!1,C=!1);const _=p.$el,b=_.querySelector(`.${l.be("node","content")}`).getBoundingClientRect(),O=n.value.getBoundingClientRect(),H=n.value.scrollTop;let S;const M=i?h?.25:C?.45:1:Number.NEGATIVE_INFINITY,T=C?h?.75:i?.55:0:Number.POSITIVE_INFINITY;let F=-9999;const Y=v.clientY-b.top;Y<b.height*M?S="before":Y>b.height*T?S="after":h?S="inner":S="none";const j=_.querySelector(`.${l.be("node","expand-icon")}`).getBoundingClientRect(),z=a.value;S==="before"?F=j.top-O.top+H:S==="after"&&(F=j.bottom-O.top+H),z.style.top=`${F}px`,z.style.left=`${j.right-O.left}px`,S==="inner"?so(_,l.is("drop-inner")):ct(_,l.is("drop-inner")),s.value.showDropIndicator=S==="before"||S==="after",s.value.allowDrop=s.value.showDropIndicator||E,s.value.dropType=S,t.emit("node-drag-over",r.node,p.node,v)},treeNodeDragEnd:v=>{var g,p;const{draggingNode:f,dropType:r,dropNode:i}=s.value;if(v.preventDefault(),v.dataTransfer&&(v.dataTransfer.dropEffect="move"),f?.node.data&&i){const h={data:f.node.data};r!=="none"&&f.node.remove(),r==="before"?(g=i.node.parent)==null||g.insertBefore(h,i.node):r==="after"?(p=i.node.parent)==null||p.insertAfter(h,i.node):r==="inner"&&i.node.insertChild(h),r!=="none"&&(o.value.registerNode(h),o.value.key&&f.node.eachNode(C=>{var E;(E=o.value.nodesMap[C.data[o.value.key]])==null||E.setChecked(C.checked,!o.value.checkStrictly)})),ct(i.$el,l.is("drop-inner")),t.emit("node-drag-end",f.node,i.node,r,v),r!=="none"&&t.emit("node-drop",f.node,i.node,r,v)}f&&!i&&t.emit("node-drag-end",f.node,null,r,v),s.value.showDropIndicator=!1,s.value.draggingNode=null,s.value.dropNode=null,s.value.allowDrop=!0}}),{dragState:s}}const kl=L({name:"ElTreeNode",components:{ElCollapseTransition:na,ElCheckbox:io,NodeContent:yl,ElIcon:le,Loading:ro},props:{node:{type:Ee,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(e,t){const n=X("tree"),{broadcastExpanded:a}=Rn(e),o=ne(Bt),l=$(!1),s=$(!1),d=$(),u=$(),c=$(),v=ne(Fn),g=Ae();ue(Pn,g),e.node.expanded&&(l.value=!0,s.value=!0);const p=o.props.props.children||"children";q(()=>{var T;const F=(T=e.node.data)==null?void 0:T[p];return F&&[...F]},()=>{e.node.updateChildren()}),q(()=>e.node.indeterminate,T=>{i(e.node.checked,T)}),q(()=>e.node.checked,T=>{i(T,e.node.indeterminate)}),q(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),q(()=>e.node.expanded,T=>{re(()=>l.value=T),T&&(s.value=!0)});const f=T=>Ft(o.props.nodeKey,T.data),r=T=>{const F=e.props.class;if(!F)return{};let Y;if(Se(F)){const{data:j}=T;Y=F(j,T)}else Y=F;return Je(Y)?{[Y]:!0}:Y},i=(T,F)=>{(d.value!==T||u.value!==F)&&o.ctx.emit("check-change",e.node.data,T,F),d.value=T,u.value=F},h=T=>{bt(o.store,o.ctx.emit,()=>{var F;if((F=o?.props)==null?void 0:F.nodeKey){const j=f(e.node);o.store.value.setCurrentNodeKey(j)}else o.store.value.setCurrentNode(e.node)}),o.currentNode.value=e.node,o.props.expandOnClickNode&&E(),(o.props.checkOnClickNode||e.node.isLeaf&&o.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&_(!e.node.checked),o.ctx.emit("node-click",e.node.data,e.node,g,T)},C=T=>{var F;(F=o.instance.vnode.props)!=null&&F.onNodeContextmenu&&(T.stopPropagation(),T.preventDefault()),o.ctx.emit("node-contextmenu",T,e.node.data,e.node,g)},E=()=>{e.node.isLeaf||(l.value?(o.ctx.emit("node-collapse",e.node.data,e.node,g),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,g)}))},_=T=>{const F=o?.props.checkStrictly,Y=e.node.childNodes;!F&&Y.length&&(T=Y.some(j=>!j.isEffectivelyChecked)),e.node.setChecked(T,!F),re(()=>{const j=o.store.value;o.ctx.emit("check",e.node.data,{checkedNodes:j.getCheckedNodes(),checkedKeys:j.getCheckedKeys(),halfCheckedNodes:j.getHalfCheckedNodes(),halfCheckedKeys:j.getHalfCheckedKeys()})})};return{ns:n,node$:c,tree:o,expanded:l,childNodeRendered:s,oldChecked:d,oldIndeterminate:u,getNodeKey:f,getNodeClass:r,handleSelectChange:i,handleClick:h,handleContextMenu:C,handleExpandIconClick:E,handleCheckChange:_,handleChildNodeExpand:(T,F,Y)=>{a(F),o.ctx.emit("node-expand",T,F,Y)},handleDragStart:T=>{o.props.draggable&&v.treeNodeDragStart({event:T,treeNode:e})},handleDragOver:T=>{T.preventDefault(),o.props.draggable&&v.treeNodeDragOver({event:T,treeNode:{$el:c.value,node:e.node}})},handleDrop:T=>{T.preventDefault()},handleDragEnd:T=>{o.props.draggable&&v.treeNodeDragEnd(T)},CaretRight:co}}}),Cl=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],_l=["aria-expanded"];function wl(e,t,n,a,o,l){const s=Q("el-icon"),d=Q("el-checkbox"),u=Q("loading"),c=Q("node-content"),v=Q("el-tree-node"),g=Q("el-collapse-transition");return Be((w(),I("div",{ref:"node$",class:D([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[2]||(t[2]=ee((...p)=>e.handleClick&&e.handleClick(...p),["stop"])),onContextmenu:t[3]||(t[3]=(...p)=>e.handleContextMenu&&e.handleContextMenu(...p)),onDragstart:t[4]||(t[4]=ee((...p)=>e.handleDragStart&&e.handleDragStart(...p),["stop"])),onDragover:t[5]||(t[5]=ee((...p)=>e.handleDragOver&&e.handleDragOver(...p),["stop"])),onDragend:t[6]||(t[6]=ee((...p)=>e.handleDragEnd&&e.handleDragEnd(...p),["stop"])),onDrop:t[7]||(t[7]=ee((...p)=>e.handleDrop&&e.handleDrop(...p),["stop"]))},[x("div",{class:D(e.ns.be("node","content")),style:de({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(w(),B(s,{key:0,class:D([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:ee(e.handleExpandIconClick,["stop"])},{default:k(()=>[(w(),B(ze(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):U("v-if",!0),e.showCheckbox?(w(),B(d,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=ee(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):U("v-if",!0),e.node.loading?(w(),B(s,{key:2,class:D([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:k(()=>[y(u)]),_:1},8,["class"])):U("v-if",!0),y(c,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),y(g,null,{default:k(()=>[!e.renderAfterExpand||e.childNodeRendered?Be((w(),I("div",{key:0,class:D(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:t[1]||(t[1]=ee(()=>{},["stop"]))},[(w(!0),I(ce,null,ke(e.node.childNodes,p=>(w(),B(v,{key:e.getNodeKey(p),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:p,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,_l)),[[Ve,e.expanded]]):U("v-if",!0)]),_:1})],42,Cl)),[[Ve,e.node.visible]])}var Nl=W(kl,[["render",wl],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function El({el$:e},t){const n=X("tree");Ce(()=>{l()}),fn(()=>{var s;(s=e.value)==null||s.querySelectorAll("input[type=checkbox]").forEach(d=>{d.setAttribute("tabindex","-1")})});function a(s,d){var u,c;const v=t.value.getNode(s[d].dataset.key);return v.canFocus&&v.visible&&(((u=v.parent)==null?void 0:u.expanded)||((c=v.parent)==null?void 0:c.level)===0)}$t(e,"keydown",s=>{const d=s.target;if(!d.className.includes(n.b("node")))return;const u=Le(s),c=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),v=c.indexOf(d);let g;if([te.up,te.down].includes(u)){if(s.preventDefault(),u===te.up){g=v===-1?0:v!==0?v-1:c.length-1;const f=g;for(;!a(c,g);){if(g--,g===f){g=-1;break}g<0&&(g=c.length-1)}}else{g=v===-1?0:v<c.length-1?v+1:0;const f=g;for(;!a(c,g);){if(g++,g===f){g=-1;break}g>=c.length&&(g=0)}}g!==-1&&c[g].focus()}[te.left,te.right].includes(u)&&(s.preventDefault(),d.click());const p=d.querySelector('[type="checkbox"]');[te.enter,te.numpadEnter,te.space].includes(u)&&p&&(s.preventDefault(),p.click())});const l=()=>{var s;if(!e.value)return;const d=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(v=>{v.setAttribute("tabindex","-1")});const c=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(s=d[0])==null||s.setAttribute("tabindex","0")}}const Bn=se({data:{type:V(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:{type:Array},defaultExpandedKeys:{type:Array},currentNodeKey:{type:[String,Number]},renderContent:{type:V(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:V(Function)},allowDrop:{type:V(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:{type:Function},filterNodeMethod:{type:Function},accordion:Boolean,indent:{type:Number,default:18},icon:{type:Nt}}),$l={"check-change":(e,t,n)=>e&&pt(t)&&pt(n),"current-change":(e,t)=>!0,"node-click":(e,t,n,a)=>e&&t&&a instanceof Event,"node-contextmenu":(e,t,n,a)=>e instanceof Event&&t&&n,"node-collapse":(e,t,n)=>e&&t,"node-expand":(e,t,n)=>e&&t,check:(e,t)=>e&&t,"node-drag-start":(e,t)=>e&&t,"node-drag-end":(e,t,n,a)=>e&&a,"node-drop":(e,t,n,a)=>e&&t&&a,"node-drag-leave":(e,t,n)=>e&&t&&n,"node-drag-enter":(e,t,n)=>e&&t&&n,"node-drag-over":(e,t,n)=>e&&t&&n},Sl=L({name:"ElTree",components:{ElTreeNode:Nl},props:Bn,emits:$l,setup(e,t){const{t:n}=tt(),a=X("tree"),o=$(new vl({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));o.value.initialize();const l=$(o.value.root),s=$(null),d=$(null),u=$(null),{broadcastExpanded:c}=Rn(e),{dragState:v}=bl({props:e,ctx:t,el$:d,dropIndicator$:u,store:o});El({el$:d},o);const g=Ae(),p=P(()=>{let N=g?.parent;for(;N;){if(N.type.name==="ElTreeSelect")return!0;N=N.parent}return!1}),f=P(()=>{const{childNodes:N}=l.value;return(!N||N.length===0||N.every(({visible:G})=>!G))&&!p.value});q(()=>e.currentNodeKey,N=>{o.value.setCurrentNodeKey(N??null)}),q(()=>e.defaultCheckedKeys,(N,G)=>{Dt(N,G)||o.value.setDefaultCheckedKey(N??[])}),q(()=>e.defaultExpandedKeys,N=>{o.value.setDefaultExpandedKeys(N??[])}),q(()=>e.data,N=>{o.value.setData(N)},{deep:!0}),q(()=>e.checkStrictly,N=>{o.value.checkStrictly=N});const r=N=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");o.value.filter(N)},i=N=>Ft(e.nodeKey,N.data),h=N=>{if(!e.nodeKey)throw new Error(`[Tree] nodeKey is required in ${N}`)},C=N=>{h("getNodePath");const G=o.value.getNode(N);if(!G)return[];const ae=[G.data];let Te=G.parent;for(;Te&&Te!==l.value;)ae.push(Te.data),Te=Te.parent;return ae.reverse()},E=(N,G)=>o.value.getCheckedNodes(N,G),_=N=>o.value.getCheckedKeys(N),b=()=>{const N=o.value.getCurrentNode();return N?N.data:null},O=()=>{h("getCurrentKey");const N=b();return N?N[e.nodeKey]:null},H=(N,G)=>{h("setCheckedNodes"),o.value.setCheckedNodes(N,G)},S=(N,G)=>{h("setCheckedKeys"),o.value.setCheckedKeys(N,G)},M=(N,G,ae)=>{o.value.setChecked(N,G,ae)},T=()=>o.value.getHalfCheckedNodes(),F=()=>o.value.getHalfCheckedKeys(),Y=(N,G=!0)=>{h("setCurrentNode"),bt(o,t.emit,()=>{c(N),o.value.setUserCurrentNode(N,G)})},j=(N=null,G=!0)=>{h("setCurrentKey"),bt(o,t.emit,()=>{c(),o.value.setCurrentNodeKey(N,G)})},z=N=>o.value.getNode(N),ie=N=>{o.value.remove(N)},it=(N,G)=>{o.value.append(N,G)},K=(N,G)=>{o.value.insertBefore(N,G)},R=(N,G)=>{o.value.insertAfter(N,G)},J=(N,G,ae)=>{c(G),t.emit("node-expand",N,G,ae)},fe=(N,G)=>{h("updateKeyChild"),o.value.updateChildren(N,G)};return ue(Bt,{ctx:t,props:e,store:o,root:l,currentNode:s,instance:g}),ue(uo,void 0),{ns:a,store:o,root:l,currentNode:s,dragState:v,el$:d,dropIndicator$:u,isEmpty:f,filter:r,getNodeKey:i,getNodePath:C,getCheckedNodes:E,getCheckedKeys:_,getCurrentNode:b,getCurrentKey:O,setCheckedNodes:H,setCheckedKeys:S,setChecked:M,getHalfCheckedNodes:T,getHalfCheckedKeys:F,setCurrentNode:Y,setCurrentKey:j,t:n,getNode:z,remove:ie,append:it,insertBefore:K,insertAfter:R,handleNodeExpand:J,updateKeyChildren:fe}}});function Dl(e,t,n,a,o,l){const s=Q("el-tree-node");return w(),I("div",{ref:"el$",class:D([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(w(!0),I(ce,null,ke(e.root.childNodes,d=>(w(),B(s,{key:e.getNodeKey(d),node:d,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(w(),I("div",{key:0,class:D(e.ns.e("empty-block"))},[A(e.$slots,"empty",{},()=>{var d;return[x("span",{class:D(e.ns.e("empty-text"))},he((d=e.emptyText)!=null?d:e.t("el.tree.emptyText")),3)]})],2)):U("v-if",!0),Be(x("div",{ref:"dropIndicator$",class:D(e.ns.e("drop-indicator"))},null,2),[[Ve,e.dragState.showDropIndicator]])],2)}var Il=W(Sl,[["render",Dl],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);const Vt=ye(Il),Tl=(e,{attrs:t,emit:n},{select:a,tree:o,key:l})=>{const s=X("tree-select");q(()=>e.data,()=>{e.filterable&&re(()=>{var c,v;(v=o.value)==null||v.filter((c=a.value)==null?void 0:c.states.inputValue)})},{flush:"post"});const d=c=>{var v;const g=c.at(-1);if(g.expanded&&g.childNodes.at(-1))d([g.childNodes.at(-1)]);else{const p=(v=o.value.el$)==null?void 0:v.querySelector(`[data-key="${c.at(-1).key}"]`);p?.focus({preventScroll:!0});return}};return Ce(()=>{$t(()=>{var c;return(c=a.value)==null?void 0:c.$el},"keydown",async c=>{const v=Le(c),{dropdownMenuVisible:g}=a.value;[te.down,te.up].includes(v)&&g&&(await re(),setTimeout(()=>{var p,f,r;if(te.up===v){const i=o.value.store.root.childNodes;d(i);return}(r=(f=(p=a.value.optionsArray[a.value.states.hoveringIndex].$el)==null?void 0:p.parentNode)==null?void 0:f.parentNode)==null||r.focus({preventScroll:!0})}))},{capture:!0})}),{...Xe(hn(e),Object.keys(It.props)),...t,class:P(()=>t.class),style:P(()=>t.style),"onUpdate:modelValue":c=>n(Ue,c),valueKey:l,popperClass:P(()=>{const c=[s.e("popper")];return e.popperClass&&c.push(e.popperClass),c.join(" ")}),filterMethod:(c="")=>{var v;e.filterMethod?e.filterMethod(c):e.remoteMethod?e.remoteMethod(c):(v=o.value)==null||v.filter(c)}}},Kl=L({extends:ft,setup(e,t){const n=ft.setup(e,t);delete n.selectOptionClick;const a=Ae().proxy;return re(()=>{n.select.states.cachedOptions.get(a.value)||n.select.onOptionCreate(a)}),q(()=>t.attrs.visible,o=>{re(()=>{n.states.visible=o})},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function Ct(e){return e||e===0}function At(e){return be(e)&&e.length}function Ke(e){return be(e)?e:Ct(e)?[e]:[]}function qe(e,t,n,a,o){for(let l=0;l<e.length;l++){const s=e[l];if(t(s,l,e,o))return a?a(s,l,e,o):s;{const d=n(s);if(At(d)){const u=qe(d,t,n,a,s);if(u)return u}}}}function We(e,t,n,a){for(let o=0;o<e.length;o++){const l=e[o];t(l,o,e,a);const s=n(l);At(s)&&We(s,t,n,l)}}const Ol=(e,{attrs:t,slots:n,emit:a},{select:o,tree:l,key:s})=>{q([()=>e.modelValue,l],()=>{e.showCheckbox&&re(()=>{const p=l.value;p&&!Dt(p.getCheckedKeys(),Ke(e.modelValue))&&p.setCheckedKeys(Ke(e.modelValue))})},{immediate:!0,deep:!0});const d=P(()=>({value:s.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),u=(p,f)=>{var r;const i=d.value[p];return Se(i)?i(f,(r=l.value)==null?void 0:r.getNode(u("value",f))):f[i]},c=Ke(e.modelValue).map(p=>qe(e.data||[],f=>u("value",f)===p,f=>u("children",f),(f,r,i,h)=>h&&u("value",h))).filter(p=>Ct(p)),v=P(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const p=[];return We(e.data.concat(e.cacheData),f=>{const r=u("value",f);p.push({value:r,currentLabel:u("label",f),isDisabled:u("disabled",f)})},f=>u("children",f)),p}),g=()=>{var p;return(p=l.value)==null?void 0:p.getCheckedKeys().filter(f=>{var r;const i=(r=l.value)==null?void 0:r.getNode(f);return!Fe(i)&&fo(i.childNodes)})};return{...Xe(hn(e),Object.keys(Vt.props)),...t,nodeKey:s,expandOnClickNode:P(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:P(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(c):c),renderContent:(p,{node:f,data:r,store:i})=>p(Kl,{value:u("value",r),label:u("label",r),disabled:u("disabled",r),visible:f.visible},e.renderContent?()=>e.renderContent(p,{node:f,data:r,store:i}):n.default?()=>n.default({node:f,data:r,store:i}):void 0),filterNodeMethod:(p,f,r)=>e.filterNodeMethod?e.filterNodeMethod(p,f,r):p?new RegExp(po(p),"i").test(u("label",f)||""):!0,onNodeClick:(p,f,r)=>{var i,h,C;if((i=t.onNodeClick)==null||i.call(t,p,f,r),!(e.showCheckbox&&e.checkOnClickNode))if(!e.showCheckbox&&(e.checkStrictly||f.isLeaf)){if(!u("disabled",p)){const E=(h=o.value)==null?void 0:h.states.options.get(u("value",p));(C=o.value)==null||C.handleOptionSelect(E)}}else e.expandOnClickNode&&r.proxy.handleExpandIconClick()},onCheck:(p,f)=>{var r;if(!e.showCheckbox)return;const i=u("value",p),h={};We([l.value.store.root],b=>h[b.key]=b,b=>b.childNodes);const C=f.checkedKeys,E=e.multiple?Ke(e.modelValue).filter(b=>!(b in h)&&!C.includes(b)):[],_=E.concat(C);if(e.checkStrictly)a(Ue,e.multiple?_:_.includes(i)?i:void 0);else if(e.multiple){const b=g();a(Ue,E.concat(b))}else{const b=qe([p],S=>!At(u("children",S))&&!u("disabled",S),S=>u("children",S)),O=b?u("value",b):void 0,H=Ct(e.modelValue)&&!!qe([p],S=>u("value",S)===e.modelValue,S=>u("children",S));a(Ue,O===e.modelValue||H?void 0:O)}re(()=>{var b;const O=Ke(e.modelValue);l.value.setCheckedKeys(O),(b=t.onCheck)==null||b.call(t,p,{checkedKeys:l.value.getCheckedKeys(),checkedNodes:l.value.getCheckedNodes(),halfCheckedKeys:l.value.getHalfCheckedKeys(),halfCheckedNodes:l.value.getHalfCheckedNodes()})}),(r=o.value)==null||r.focus()},onNodeExpand:(p,f,r)=>{var i;(i=t.onNodeExpand)==null||i.call(t,p,f,r),re(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&f.checked){const h={},C=l.value.getCheckedKeys();We([l.value.store.root],b=>h[b.key]=b,b=>b.childNodes);const E=Ke(e.modelValue).filter(b=>!(b in h)&&!C.includes(b)),_=g();a(Ue,E.concat(_))}})},cacheOptions:v}};var Pl=L({props:{data:{type:Array,default:()=>[]}},setup(e){const t=ne(ho);return q(()=>e.data,()=>{var n;e.data.forEach(o=>{t.states.cachedOptions.has(o.value)||t.states.cachedOptions.set(o.value,o)});const a=((n=t.selectRef)==null?void 0:n.querySelectorAll("input"))||[];mo&&!Array.from(a).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Rl=L({name:"ElTreeSelect",inheritAttrs:!1,props:{...vo,...Bn,cacheData:{type:Array,default:()=>[]}},setup(e,t){const{slots:n,expose:a}=t,o=$(),l=$(),s=P(()=>e.nodeKey||e.valueKey||"value"),d=Tl(e,t,{select:o,tree:l,key:s}),{cacheOptions:u,...c}=Ol(e,t,{select:o,tree:l,key:s}),v=Pe({});return a(v),Ce(()=>{Object.assign(v,{...Xe(l.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Xe(o.value,["focus","blur","selectedLabel"]),treeRef:l.value,selectRef:o.value})}),()=>He(It,Pe({...d,ref:g=>o.value=g}),{...n,default:()=>[He(Pl,{data:u.value}),He(Vt,Pe({...c,ref:g=>l.value=g}))]})}});var Fl=W(Rl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);const Vn=ye(Fl),An=Symbol("uploadContextKey"),Bl="ElUpload";class Vl extends Error{constructor(t,n,a,o){super(t),this.name="UploadAjaxError",this.status=n,this.method=a,this.url=o}}function Qt(e,t,n){let a;return n.response?a=`${n.response.error||n.response}`:n.responseText?a=`${n.responseText}`:a=`fail to ${t.method} ${e} ${n.status}`,new Vl(a,n.status,t.method,e)}function Al(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const Ll=e=>{typeof XMLHttpRequest>"u"&&Tt(Bl,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,n=e.action;t.upload&&t.upload.addEventListener("progress",l=>{const s=l;s.percent=l.total>0?l.loaded/l.total*100:0,e.onProgress(s)});const a=new FormData;if(e.data)for(const[l,s]of Object.entries(e.data))be(s)&&s.length?a.append(l,...s):a.append(l,s);a.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(Qt(n,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(Qt(n,e,t));e.onSuccess(Al(t))}),t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const o=e.headers||{};if(o instanceof Headers)o.forEach((l,s)=>t.setRequestHeader(s,l));else for(const[l,s]of Object.entries(o))Fe(s)||t.setRequestHeader(l,String(s));return t.send(a),t},Ln=["text","picture","picture-card"];let Ml=1;const _t=()=>Date.now()+Ml++,Mn=se({action:{type:String,default:"#"},headers:{type:V(Object)},method:{type:String,default:"post"},data:{type:V([Object,Function,Promise]),default:()=>ht({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:V(Array),default:()=>ht([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Ln,default:"text"},httpRequest:{type:V(Function),default:Ll},disabled:{type:Boolean,default:void 0},limit:Number,directory:Boolean}),Ul=se({...Mn,beforeUpload:{type:V(Function),default:oe},beforeRemove:{type:V(Function)},onRemove:{type:V(Function),default:oe},onChange:{type:V(Function),default:oe},onPreview:{type:V(Function),default:oe},onSuccess:{type:V(Function),default:oe},onProgress:{type:V(Function),default:oe},onError:{type:V(Function),default:oe},onExceed:{type:V(Function),default:oe},crossorigin:{type:V(String)}}),Gl=se({files:{type:V(Array),default:()=>ht([])},disabled:{type:Boolean,default:void 0},handlePreview:{type:V(Function),default:oe},listType:{type:String,values:Ln,default:"text"},crossorigin:{type:V(String)}}),Hl={remove:e=>!!e},zl=["tabindex","aria-disabled","onKeydown"],jl=["src","crossorigin"],xl=["onClick"],ql=["title"],Wl=["onClick"],Yl=["onClick"],Jl=L({name:"ElUploadList",__name:"upload-list",props:Gl,emits:Hl,setup(e,{emit:t}){const n=e,a=t,{t:o}=tt(),l=X("upload"),s=X("icon"),d=X("list"),u=at(),c=$(!1),v=P(()=>[l.b("list"),l.bm("list",n.listType),l.is("disabled",u.value)]),g=p=>{a("remove",p)};return(p,f)=>(w(),B(bo,{tag:"ul",class:D(v.value),name:m(d).b()},{default:k(()=>[(w(!0),I(ce,null,ke(p.files,(r,i)=>(w(),I("li",{key:r.uid||r.name,class:D([m(l).be("list","item"),m(l).is(r.status),{focusing:c.value}]),tabindex:m(u)?void 0:0,"aria-disabled":m(u),role:"button",onKeydown:mn(h=>!m(u)&&g(r),["delete"]),onFocus:f[0]||(f[0]=h=>c.value=!0),onBlur:f[1]||(f[1]=h=>c.value=!1),onClick:f[2]||(f[2]=h=>c.value=!1)},[A(p.$slots,"default",{file:r,index:i},()=>[p.listType==="picture"||r.status!=="uploading"&&p.listType==="picture-card"?(w(),I("img",{key:0,class:D(m(l).be("list","item-thumbnail")),src:r.url,crossorigin:p.crossorigin,alt:""},null,10,jl)):U("v-if",!0),r.status==="uploading"||p.listType!=="picture-card"?(w(),I("div",{key:1,class:D(m(l).be("list","item-info"))},[x("a",{class:D(m(l).be("list","item-name")),onClick:ee(h=>p.handlePreview(r),["prevent"])},[y(m(le),{class:D(m(s).m("document"))},{default:k(()=>[y(m(go))]),_:1},8,["class"]),x("span",{class:D(m(l).be("list","item-file-name")),title:r.name},he(r.name),11,ql)],10,xl),r.status==="uploading"?(w(),B(m(cl),{key:0,type:p.listType==="picture-card"?"circle":"line","stroke-width":p.listType==="picture-card"?6:2,percentage:Number(r.percentage),style:de(p.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):U("v-if",!0)],2)):U("v-if",!0),x("label",{class:D(m(l).be("list","item-status-label"))},[p.listType==="text"?(w(),B(m(le),{key:0,class:D([m(s).m("upload-success"),m(s).m("circle-check")])},{default:k(()=>[y(m(un))]),_:1},8,["class"])):["picture-card","picture"].includes(p.listType)?(w(),B(m(le),{key:1,class:D([m(s).m("upload-success"),m(s).m("check")])},{default:k(()=>[y(m(ot))]),_:1},8,["class"])):U("v-if",!0)],2),m(u)?U("v-if",!0):(w(),B(m(le),{key:2,class:D(m(s).m("close")),onClick:h=>g(r)},{default:k(()=>[y(m(pn))]),_:1},8,["class","onClick"])),U(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),U(" This is a bug which needs to be fixed "),U(" TODO: Fix the incorrect navigation interaction "),m(u)?U("v-if",!0):(w(),I("i",{key:3,class:D(m(s).m("close-tip"))},he(m(o)("el.upload.deleteTip")),3)),p.listType==="picture-card"?(w(),I("span",{key:4,class:D(m(l).be("list","item-actions"))},[x("span",{class:D(m(l).be("list","item-preview")),onClick:h=>p.handlePreview(r)},[y(m(le),{class:D(m(s).m("zoom-in"))},{default:k(()=>[y(m(yo))]),_:1},8,["class"])],10,Wl),m(u)?U("v-if",!0):(w(),I("span",{key:0,class:D(m(l).be("list","item-delete")),onClick:h=>g(r)},[y(m(le),{class:D(m(s).m("delete"))},{default:k(()=>[y(m(Ze))]),_:1},8,["class"])],10,Yl))],2)):U("v-if",!0)])],42,zl))),128)),A(p.$slots,"append")]),_:3},8,["class","name"]))}});var en=W(Jl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const Xl=se({disabled:{type:Boolean,default:void 0},directory:Boolean}),Zl={file:e=>be(e)},tn="ElUploadDrag",Ql=L({name:tn,__name:"upload-dragger",props:Xl,emits:Zl,setup(e,{emit:t}){const n=e,a=t;ne(An)||Tt(tn,"usage: <el-upload><el-upload-dragger /></el-upload>");const l=X("upload"),s=$(!1),d=at(),u=f=>new Promise((r,i)=>f.file(r,i)),c=async f=>{try{if(f.isFile){const r=await u(f);return r.isDirectory=!1,[r]}if(f.isDirectory){const r=f.createReader(),i=()=>new Promise((b,O)=>r.readEntries(b,O)),h=[];let C=await i();for(;C.length>0;)h.push(...C),C=await i();const E=h.map(b=>c(b).catch(()=>[])),_=await Promise.all(E);return Gt(_)}}catch{return[]}return[]},v=async f=>{if(d.value)return;s.value=!1,f.stopPropagation();const r=Array.from(f.dataTransfer.files),i=f.dataTransfer.items||[];if(n.directory){const h=Array.from(i).map(E=>{var _;return(_=E?.webkitGetAsEntry)==null?void 0:_.call(E)}).filter(E=>E),C=await Promise.all(h.map(c));a("file",Gt(C));return}r.forEach((h,C)=>{var E;const _=i[C],b=(E=_?.webkitGetAsEntry)==null?void 0:E.call(_);b&&(h.isDirectory=b.isDirectory)}),a("file",r)},g=()=>{d.value||(s.value=!0)},p=f=>{f.currentTarget.contains(f.relatedTarget)||(s.value=!1)};return(f,r)=>(w(),I("div",{class:D([m(l).b("dragger"),m(l).is("dragover",s.value)]),onDrop:ee(v,["prevent"]),onDragover:ee(g,["prevent"]),onDragleave:ee(p,["prevent"])},[A(f.$slots,"default")],34))}});var es=W(Ql,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const ts=se({...Mn,beforeUpload:{type:V(Function),default:oe},onRemove:{type:V(Function),default:oe},onStart:{type:V(Function),default:oe},onSuccess:{type:V(Function),default:oe},onProgress:{type:V(Function),default:oe},onError:{type:V(Function),default:oe},onExceed:{type:V(Function),default:oe}}),ns=["tabindex","aria-disabled","onKeydown"],os=["name","disabled","multiple","accept","webkitdirectory"],as=L({name:"ElUploadContent",inheritAttrs:!1,__name:"upload-content",props:ts,setup(e,{expose:t}){const n=e,a=X("upload"),o=at(),l=mt({}),s=mt(),d=i=>{if(i.length===0)return;const{autoUpload:h,limit:C,fileList:E,multiple:_,onStart:b,onExceed:O}=n;if(C&&E.length+i.length>C){O(i,E);return}_||(i=i.slice(0,1));for(const H of i){const S=H;S.uid=_t(),b(S),h&&u(S)}},u=async i=>{if(s.value.value="",!n.beforeUpload)return v(i);let h,C={};try{const _=n.data,b=n.beforeUpload(i);C=Ht(n.data)?qt(n.data):n.data,h=await b,Ht(n.data)&&Dt(_,C)&&(C=qt(n.data))}catch{h=!1}if(h===!1){n.onRemove(i);return}let E=i;h instanceof Blob&&(h instanceof File?E=h:E=new File([h],i.name,{type:i.type})),v(Object.assign(E,{uid:i.uid}),C)},c=async(i,h)=>Se(i)?i(h):i,v=async(i,h)=>{const{headers:C,data:E,method:_,withCredentials:b,name:O,action:H,onProgress:S,onSuccess:M,onError:T,httpRequest:F}=n;try{h=await c(h??E,i)}catch{n.onRemove(i);return}const{uid:Y}=i,j={headers:C||{},withCredentials:b,file:i,data:h,method:_,filename:O,action:H,onProgress:ie=>{S(ie,i)},onSuccess:ie=>{M(ie,i),delete l.value[Y]},onError:ie=>{T(ie,i),delete l.value[Y]}},z=F(j);l.value[Y]=z,z instanceof Promise&&z.then(j.onSuccess,j.onError)},g=i=>{const h=i.target.files;h&&d(Array.from(h))},p=()=>{o.value||(s.value.value="",s.value.click())},f=()=>{p()};return t({abort:i=>{ko(l.value).filter(i?([C])=>String(i.uid)===C:()=>!0).forEach(([C,E])=>{E instanceof XMLHttpRequest&&E.abort(),delete l.value[C]})},upload:u}),(i,h)=>(w(),I("div",{class:D([m(a).b(),m(a).m(i.listType),m(a).is("drag",i.drag),m(a).is("disabled",m(o))]),tabindex:m(o)?void 0:0,"aria-disabled":m(o),role:"button",onClick:p,onKeydown:mn(ee(f,["self"]),["enter","space"])},[i.drag?(w(),B(es,{key:0,disabled:m(o),directory:i.directory,onFile:d},{default:k(()=>[A(i.$slots,"default")]),_:3},8,["disabled","directory"])):A(i.$slots,"default",{key:1}),x("input",{ref_key:"inputRef",ref:s,class:D(m(a).e("input")),name:i.name,disabled:m(o),multiple:i.multiple,accept:i.accept,webkitdirectory:i.directory,type:"file",onChange:g,onClick:h[0]||(h[0]=ee(()=>{},["stop"]))},null,42,os)],42,ns))}});var nn=W(as,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const on="ElUpload",an=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},ls=(e,t)=>{const n=Co(e,"fileList",void 0,{passive:!0}),a=r=>n.value.find(i=>i.uid===r.uid);function o(r){var i;(i=t.value)==null||i.abort(r)}function l(r=["ready","uploading","success","fail"]){n.value=n.value.filter(i=>!r.includes(i.status))}function s(r){n.value=n.value.filter(i=>i.uid!==r.uid)}const d=r=>{re(()=>e.onChange(r,n.value))},u=(r,i)=>{const h=a(i);h&&(console.error(r),h.status="fail",s(h),e.onError(r,h,n.value),d(h))},c=(r,i)=>{const h=a(i);h&&(e.onProgress(r,h,n.value),h.status="uploading",h.percentage=Math.round(r.percent))},v=(r,i)=>{const h=a(i);h&&(h.status="success",h.response=r,e.onSuccess(r,h,n.value),d(h))},g=r=>{Fe(r.uid)&&(r.uid=_t());const i={name:r.name,percentage:0,status:"ready",size:r.size,raw:r,uid:r.uid};if(e.listType==="picture-card"||e.listType==="picture")try{i.url=URL.createObjectURL(r)}catch(h){_o(on,h.message),e.onError(h,i,n.value)}n.value=[...n.value,i],d(i)},p=async r=>{const i=r instanceof File?a(r):r;i||Tt(on,"file to be removed not found");const h=C=>{o(C),s(C),e.onRemove(C,n.value),an(C)};e.beforeRemove?await e.beforeRemove(i,n.value)!==!1&&h(i):h(i)};function f(){n.value.filter(({status:r})=>r==="ready").forEach(({raw:r})=>{var i;return r&&((i=t.value)==null?void 0:i.upload(r))})}return q(()=>e.listType,r=>{r!=="picture-card"&&r!=="picture"||(n.value=n.value.map(i=>{const{raw:h,url:C}=i;if(!C&&h)try{i.url=URL.createObjectURL(h)}catch(E){e.onError(E,i,n.value)}return i}))}),q(n,r=>{for(const i of r)i.uid||(i.uid=_t()),i.status||(i.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:o,clearFiles:l,handleError:u,handleProgress:c,handleStart:g,handleSuccess:v,handleRemove:p,submit:f,revokeFileObjectURL:an}},ss=L({name:"ElUpload",__name:"upload",props:Ul,setup(e,{expose:t}){const n=e,a=at(),o=mt(),{abort:l,submit:s,clearFiles:d,uploadFiles:u,handleStart:c,handleError:v,handleRemove:g,handleSuccess:p,handleProgress:f,revokeFileObjectURL:r}=ls(n,o),i=P(()=>n.listType==="picture-card"),h=P(()=>({...n,fileList:u.value,onStart:c,onProgress:f,onSuccess:p,onError:v,onRemove:g}));return Et(()=>{u.value.forEach(r)}),ue(An,{accept:Oe(n,"accept")}),t({abort:l,submit:s,clearFiles:d,handleStart:c,handleRemove:g}),(C,E)=>(w(),I("div",null,[i.value&&C.showFileList?(w(),B(en,{key:0,disabled:m(a),"list-type":C.listType,files:m(u),crossorigin:C.crossorigin,"handle-preview":C.onPreview,onRemove:m(g)},Ye({append:k(()=>[y(nn,$e({ref_key:"uploadRef",ref:o},h.value),{default:k(()=>[C.$slots.trigger?A(C.$slots,"trigger",{key:0}):U("v-if",!0),!C.$slots.trigger&&C.$slots.default?A(C.$slots,"default",{key:1}):U("v-if",!0)]),_:3},16)]),_:2},[C.$slots.file?{name:"default",fn:k(({file:_,index:b})=>[A(C.$slots,"file",{file:_,index:b})]),key:"0"}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):U("v-if",!0),!i.value||i.value&&!C.showFileList?(w(),B(nn,$e({key:1,ref_key:"uploadRef",ref:o},h.value),{default:k(()=>[C.$slots.trigger?A(C.$slots,"trigger",{key:0}):U("v-if",!0),!C.$slots.trigger&&C.$slots.default?A(C.$slots,"default",{key:1}):U("v-if",!0)]),_:3},16)):U("v-if",!0),C.$slots.trigger?A(C.$slots,"default",{key:2}):U("v-if",!0),A(C.$slots,"tip"),!i.value&&C.showFileList?(w(),B(en,{key:3,disabled:m(a),"list-type":C.listType,files:m(u),crossorigin:C.crossorigin,"handle-preview":C.onPreview,onRemove:m(g)},Ye({_:2},[C.$slots.file?{name:"default",fn:k(({file:_,index:b})=>[A(C.$slots,"file",{file:_,index:b})]),key:"0"}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):U("v-if",!0)]))}});var rs=W(ss,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const is=ye(rs),ds="modulepreload",cs=function(e,t){return new URL(e,t).href},ln={},Un=function(t,n,a){let o=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");o=Promise.allSettled(n.map(c=>{if(c=cs(c,a),c in ln)return;ln[c]=!0;const v=c.endsWith(".css"),g=v?'[rel="stylesheet"]':"";if(!!a)for(let r=s.length-1;r>=0;r--){const i=s[r];if(i.href===c&&(!v||i.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${g}`))return;const f=document.createElement("link");if(f.rel=v?"stylesheet":ds,v||(f.as="script"),f.crossOrigin="",f.href=c,u&&f.setAttribute("nonce",u),document.head.appendChild(f),v)return new Promise((r,i)=>{f.addEventListener("load",r),f.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(s){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=s,window.dispatchEvent(d),!d.defaultPrevented)throw s}return o.then(s=>{for(const d of s||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})},Gn="sidebar-theme",De=$(localStorage.getItem(Gn)||"light"),xe=()=>{De.value=De.value==="light"?"dark":"light"};q(De,e=>{localStorage.setItem(Gn,e),document.body.className=`theme-${e}`},{immediate:!0});const us={key:0,class:"sidebar-header"},ps={class:"logo-box"},fs={key:1,class:"sidebar-header-collapsed"},hs={class:"logo-box-collapsed"},ms=L({__name:"SideNavHeader",props:{isCollapse:{type:Boolean}},setup(e){return(t,n)=>{const a=le;return e.isCollapse?(w(),I("div",fs,[x("div",hs,[y(a,{class:"logo-icon"},{default:k(()=>[y(m(Qe))]),_:1})]),x("div",{class:"theme-toggle-collapsed",onClick:n[1]||(n[1]=ee((...o)=>m(xe)&&m(xe)(...o),["stop"]))},[y(a,{class:"theme-icon"},{default:k(()=>[m(De)==="dark"?(w(),B(m(zt),{key:0})):(w(),B(m(jt),{key:1}))]),_:1})])])):(w(),I("div",us,[x("div",ps,[y(a,{class:"logo-icon"},{default:k(()=>[y(m(Qe))]),_:1}),n[2]||(n[2]=x("span",{class:"logo-text"},"",-1)),x("div",{class:"theme-toggle-wrapper",onClick:n[0]||(n[0]=ee((...o)=>m(xe)&&m(xe)(...o),["stop"]))},[y(a,{class:"theme-icon"},{default:k(()=>[m(De)==="dark"?(w(),B(m(zt),{key:0})):(w(),B(m(jt),{key:1}))]),_:1})])])]))}}}),vs=we(ms,[["__scopeId","data-v-9ffec8b7"]]),gs={class:"action-buttons-container"},ys={key:0,class:"action-buttons"},bs={key:1,class:"add-device-btn-collapse"},ks=L({__name:"SideNavActions",props:{isCollapse:{type:Boolean}},emits:["add-device","add-group"],setup(e){return(t,n)=>{const a=_e,o=wo,l=nt;return w(),I("div",gs,[e.isCollapse?(w(),I("div",bs,[y(l,{content:"",placement:"right"},{default:k(()=>[y(a,{type:"primary",circle:"",onClick:n[2]||(n[2]=s=>t.$emit("add-device")),icon:m(vt)},null,8,["icon"])]),_:1}),y(l,{content:"",placement:"right"},{default:k(()=>[y(a,{type:"success",circle:"",onClick:n[3]||(n[3]=s=>t.$emit("add-group")),icon:m(gt)},null,8,["icon"])]),_:1})])):(w(),I("div",ys,[y(o,null,{default:k(()=>[y(a,{type:"primary",onClick:n[0]||(n[0]=s=>t.$emit("add-device")),icon:m(vt)},{default:k(()=>[...n[4]||(n[4]=[Z("  ",-1)])]),_:1},8,["icon"]),y(a,{type:"success",onClick:n[1]||(n[1]=s=>t.$emit("add-group")),icon:m(gt)},{default:k(()=>[...n[5]||(n[5]=[Z("  ",-1)])]),_:1},8,["icon"])]),_:1})]))])}}}),Cs=we(ks,[["__scopeId","data-v-9eb50b71"]]),_s={class:"node-label"},ws=L({__name:"SideNavTree",props:{treeData:{},treeProps:{},expandedKeys:{},currentNodeKey:{},isCollapse:{type:Boolean}},emits:["node-click","group-command","edit-device","delete-device"],setup(e){const t=e,n=$(),a=()=>{re(()=>{n.value&&t.expandedKeys.forEach(l=>{const s=n.value?.getNode(l);s&&(s.expanded=!0)})})},o=()=>{re(()=>{n.value&&t.currentNodeKey&&n.value.setCurrentKey(t.currentNodeKey)})};return q(()=>t.expandedKeys,a,{deep:!0}),q(()=>t.treeData,()=>{a(),o()},{deep:!0}),q(()=>t.currentNodeKey,o),(l,s)=>{const d=le,u=nt,c=_e,v=el,g=tl,p=Qa;return w(),B(m(Vt),{ref_key:"treeRef",ref:n,data:e.treeData,props:e.treeProps,"node-key":"nodeKey","default-expanded-keys":e.expandedKeys,"current-node-key":e.currentNodeKey,"expand-on-click-node":!1,"highlight-current":"",onNodeClick:s[1]||(s[1]=f=>l.$emit("node-click",f)),class:"device-tree"},{default:k(({node:f,data:r})=>[x("div",{class:D(["tree-node-content",{"is-group":r.isGroup}])},[y(u,{content:f.label,placement:"right",disabled:!e.isCollapse},{default:k(()=>[y(d,{class:"node-icon"},{default:k(()=>[r.isGroup?(w(),B(m(No),{key:0})):(w(),B(m(Qe),{key:1}))]),_:2},1024)]),_:2},1032,["content","disabled"]),x("span",_s,he(f.label),1),e.isCollapse?U("",!0):(w(),I("div",{key:0,class:"node-actions",onClick:s[0]||(s[0]=ee(()=>{},["stop"]))},[r.isGroup?(w(),B(p,{key:0,trigger:"click",onCommand:i=>l.$emit("group-command",i,r)},{dropdown:k(()=>[y(g,null,{default:k(()=>[y(v,{command:"edit",icon:m(yt)},{default:k(()=>[...s[2]||(s[2]=[Z("",-1)])]),_:1},8,["icon"]),y(v,{command:"addDevice",icon:m(vt)},{default:k(()=>[...s[3]||(s[3]=[Z("",-1)])]),_:1},8,["icon"]),y(v,{command:"addSubGroup",icon:m(gt)},{default:k(()=>[...s[4]||(s[4]=[Z("",-1)])]),_:1},8,["icon"]),y(v,{command:"startAll",icon:m($o)},{default:k(()=>[...s[5]||(s[5]=[Z("",-1)])]),_:1},8,["icon"]),y(v,{command:"stopAll",icon:m(So)},{default:k(()=>[...s[6]||(s[6]=[Z("",-1)])]),_:1},8,["icon"]),y(v,{command:"delete",icon:m(Ze),divided:""},{default:k(()=>[...s[7]||(s[7]=[Z("",-1)])]),_:1},8,["icon"])]),_:1})]),default:k(()=>[y(c,{link:"",size:"small",icon:m(Eo)},null,8,["icon"])]),_:1},8,["onCommand"])):(w(),I(ce,{key:1},[y(c,{link:"",size:"small",icon:m(yt),onClick:i=>l.$emit("edit-device",r)},null,8,["icon","onClick"]),y(c,{link:"",size:"small",icon:m(Ze),onClick:i=>l.$emit("delete-device",r)},null,8,["icon","onClick"])],64))]))],2)]),_:1},8,["data","props","default-expanded-keys","current-node-key"])}}}),Ns=we(ws,[["__scopeId","data-v-c9679cbb"]]),Es={key:0,class:"ungrouped-section"},$s={class:"ungrouped-list"},Ss=["onClick"],Ds=L({__name:"SideNavUngrouped",props:{ungroupedDevices:{},expanded:{type:Boolean},currentDeviceName:{},isCollapse:{type:Boolean}},emits:["toggle","device-click","edit-device","delete-device"],setup(e){return(t,n)=>{const a=le,o=nt,l=_e;return e.ungroupedDevices.length>0?(w(),I("div",Es,[x("div",{class:"ungrouped-header",onClick:n[0]||(n[0]=s=>t.$emit("toggle"))},[y(a,null,{default:k(()=>[y(m(Do),{class:D({"is-expanded":e.expanded})},null,8,["class"])]),_:1}),x("span",null," ("+he(e.ungroupedDevices.length)+")",1)]),Be(x("div",$s,[(w(!0),I(ce,null,ke(e.ungroupedDevices,s=>(w(),I("div",{key:s.id,class:D(["ungrouped-item",{"is-active":e.currentDeviceName===s.name}]),onClick:d=>t.$emit("device-click",s)},[y(o,{content:s.name,placement:"right",disabled:!e.isCollapse},{default:k(()=>[y(a,null,{default:k(()=>[y(m(Qe))]),_:1})]),_:1},8,["content","disabled"]),x("span",null,he(s.name),1),e.isCollapse?U("",!0):(w(),I("div",{key:0,class:"node-actions",onClick:n[1]||(n[1]=ee(()=>{},["stop"]))},[y(l,{link:"",size:"small",icon:m(yt),onClick:d=>t.$emit("edit-device",s.name)},null,8,["icon","onClick"]),y(l,{link:"",size:"small",icon:m(Ze),onClick:d=>t.$emit("delete-device",s.name)},null,8,["icon","onClick"])]))],10,Ss))),128))],512),[[Ve,e.expanded]])])):U("",!0)}}}),Is=we(Ds,[["__scopeId","data-v-b15ab307"]]),Ts={class:"device-form-basic"},Ks=L({__name:"DeviceFormBasic",props:{modelValue:{},groupOptions:{}},setup(e){return(t,n)=>{const a=Kt,o=Ot,l=lt,s=Vn;return w(),I("div",Ts,[y(a,{"content-position":"left"},{default:k(()=>[...n[3]||(n[3]=[Z("",-1)])]),_:1}),y(l,{label:"",prop:"code"},{default:k(()=>[y(o,{modelValue:e.modelValue.code,"onUpdate:modelValue":n[0]||(n[0]=d=>e.modelValue.code=d),placeholder:" PCS1"},null,8,["modelValue"])]),_:1}),y(l,{label:"",prop:"name"},{default:k(()=>[y(o,{modelValue:e.modelValue.name,"onUpdate:modelValue":n[1]||(n[1]=d=>e.modelValue.name=d),placeholder:""},null,8,["modelValue"])]),_:1}),y(l,{label:""},{default:k(()=>[y(s,{modelValue:e.modelValue.group_id,"onUpdate:modelValue":n[2]||(n[2]=d=>e.modelValue.group_id=d),data:e.groupOptions,props:{label:"name",value:"id",children:"children"},placeholder:"","check-strictly":"",clearable:"",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1})])}}}),Os=we(Ks,[["__scopeId","data-v-f4f64863"]]),Ps={class:"device-form-config"},Rs=L({__name:"DeviceFormConfig",props:{modelValue:{},mediaType:{},protocols:{},serialPorts:{}},emits:["update:mediaType"],setup(e,{emit:t}){const n=e,a=t,o=$(n.mediaType);q(()=>n.mediaType,u=>o.value=u);const l=P(()=>n.protocols.filter(u=>u.conn_types.includes(n.modelValue.conn_type))),s=[1200,2400,4800,9600,19200,38400,57600,115200],d=u=>{a("update:mediaType",u),u==="serial"?n.modelValue.conn_type=3:n.modelValue.conn_type=2};return(u,c)=>{const v=Kt,g=To,p=Io,f=lt,r=ft,i=It,h=Ot,C=Ko,E=Po,_=Oo;return w(),I("div",Ps,[y(v,{"content-position":"left"},{default:k(()=>[...c[13]||(c[13]=[Z("",-1)])]),_:1}),y(f,{label:""},{default:k(()=>[y(p,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=b=>o.value=b),onChange:d},{default:k(()=>[y(g,{value:"serial"},{default:k(()=>[...c[14]||(c[14]=[Z("",-1)])]),_:1}),y(g,{value:"network"},{default:k(()=>[...c[15]||(c[15]=[Z("",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),y(f,{label:"",prop:"conn_type"},{default:k(()=>[o.value==="serial"?(w(),B(p,{key:0,modelValue:e.modelValue.conn_type,"onUpdate:modelValue":c[1]||(c[1]=b=>e.modelValue.conn_type=b)},{default:k(()=>[y(g,{value:0},{default:k(()=>[...c[16]||(c[16]=[Z("",-1)])]),_:1}),y(g,{value:3},{default:k(()=>[...c[17]||(c[17]=[Z("",-1)])]),_:1})]),_:1},8,["modelValue"])):(w(),B(p,{key:1,modelValue:e.modelValue.conn_type,"onUpdate:modelValue":c[2]||(c[2]=b=>e.modelValue.conn_type=b)},{default:k(()=>[y(g,{value:1},{default:k(()=>[...c[18]||(c[18]=[Z("TCP",-1)])]),_:1}),y(g,{value:2},{default:k(()=>[...c[19]||(c[19]=[Z("TCP",-1)])]),_:1})]),_:1},8,["modelValue"]))]),_:1}),y(f,{label:"",prop:"protocol_type"},{default:k(()=>[y(i,{modelValue:e.modelValue.protocol_type,"onUpdate:modelValue":c[3]||(c[3]=b=>e.modelValue.protocol_type=b),style:{width:"100%"}},{default:k(()=>[(w(!0),I(ce,null,ke(l.value,b=>(w(),B(r,{key:b.value,label:b.label,value:b.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o.value==="network"?(w(),I(ce,{key:0},[y(f,{label:"IP",prop:"ip"},{default:k(()=>[y(h,{modelValue:e.modelValue.ip,"onUpdate:modelValue":c[4]||(c[4]=b=>e.modelValue.ip=b),placeholder:"0.0.0.0 (IP)"},null,8,["modelValue"])]),_:1}),y(f,{label:"",prop:"port"},{default:k(()=>[y(C,{modelValue:e.modelValue.port,"onUpdate:modelValue":c[5]||(c[5]=b=>e.modelValue.port=b),min:1,max:65535,style:{width:"100%"}},null,8,["modelValue"])]),_:1})],64)):U("",!0),o.value==="serial"?(w(),I(ce,{key:1},[y(f,{label:"",prop:"com_port"},{default:k(()=>[y(i,{modelValue:e.modelValue.com_port,"onUpdate:modelValue":c[6]||(c[6]=b=>e.modelValue.com_port=b),filterable:"","allow-create":"",placeholder:"",style:{width:"100%"}},{default:k(()=>[(w(!0),I(ce,null,ke(e.serialPorts,b=>(w(),B(r,{key:b.device,label:`${b.device} (${b.description})`,value:b.device},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),y(f,{label:"",prop:"baud_rate"},{default:k(()=>[y(i,{modelValue:e.modelValue.baud_rate,"onUpdate:modelValue":c[7]||(c[7]=b=>e.modelValue.baud_rate=b),style:{width:"100%"}},{default:k(()=>[(w(),I(ce,null,ke(s,b=>y(r,{key:b,label:b,value:b},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),y(_,{gutter:20},{default:k(()=>[y(E,{span:8},{default:k(()=>[y(f,{label:"",prop:"data_bits"},{default:k(()=>[y(i,{modelValue:e.modelValue.data_bits,"onUpdate:modelValue":c[8]||(c[8]=b=>e.modelValue.data_bits=b)},{default:k(()=>[y(r,{label:7,value:7}),y(r,{label:8,value:8})]),_:1},8,["modelValue"])]),_:1})]),_:1}),y(E,{span:8},{default:k(()=>[y(f,{label:"",prop:"stop_bits"},{default:k(()=>[y(i,{modelValue:e.modelValue.stop_bits,"onUpdate:modelValue":c[9]||(c[9]=b=>e.modelValue.stop_bits=b)},{default:k(()=>[y(r,{label:1,value:1}),y(r,{label:2,value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1}),y(E,{span:8},{default:k(()=>[y(f,{label:"",prop:"parity"},{default:k(()=>[y(i,{modelValue:e.modelValue.parity,"onUpdate:modelValue":c[10]||(c[10]=b=>e.modelValue.parity=b)},{default:k(()=>[y(r,{label:"",value:"N"}),y(r,{label:"",value:"O"}),y(r,{label:"",value:"E"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):U("",!0),e.modelValue.protocol_type===3?(w(),B(f,{key:2,label:"",prop:"rtu_addr"},{default:k(()=>[y(h,{modelValue:e.modelValue.rtu_addr,"onUpdate:modelValue":c[11]||(c[11]=b=>e.modelValue.rtu_addr=b),placeholder:"DLT645  12 "},null,8,["modelValue"])]),_:1})):(w(),B(f,{key:3,label:"",prop:"rtu_addr"},{default:k(()=>[y(h,{modelValue:e.modelValue.rtu_addr,"onUpdate:modelValue":c[12]||(c[12]=b=>e.modelValue.rtu_addr=b),placeholder:"Modbus  ( 1)"},null,8,["modelValue"])]),_:1}))])}}}),Fs={class:"device-form-points"},Bs=L({__name:"DeviceFormPoints",emits:["file-change"],setup(e,{expose:t,emit:n}){const a=$(),o=n,l=d=>(o("file-change",d.file),Promise.resolve());return t({clearFiles:()=>{a.value?.clearFiles()}}),(d,u)=>{const c=Kt,v=_e,g=is,p=lt;return w(),I("div",Fs,[y(c,{"content-position":"left"},{default:k(()=>[...u[0]||(u[0]=[Z("",-1)])]),_:1}),y(p,{label:""},{default:k(()=>[y(g,{ref_key:"uploadRef",ref:a,action:"#","auto-upload":!0,limit:1,"http-request":l,accept:".xlsx,.xls"},{trigger:k(()=>[y(v,{type:"success",plain:"",icon:m(Ro)},{default:k(()=>[...u[1]||(u[1]=[Z(" Excel ",-1)])]),_:1},8,["icon"])]),tip:k(()=>[...u[2]||(u[2]=[x("div",{class:"el-upload__tip"},"  .xlsx ///  sheet ",-1)])]),_:1},512)]),_:1})])}}}),Vs=we(Bs,[["__scopeId","data-v-f3841c7c"]]);async function As(){try{return await pe("/channel/protocols","get",null)}catch(e){throw console.error("Error fetching protocol config:",e),e}}async function Ls(){try{return await pe("/channel/serial_ports","get",null)}catch(e){throw console.error("Error fetching serial ports:",e),e}}async function Ms(e){try{return await pe("/channel/create","post",e)}catch(t){throw console.error("Error creating channel:",t),t}}async function Us(e,t){try{const n=new FormData;return n.append("channel_id",e.toString()),n.append("file",t),(await Pt.post("/channel/import_points",n,{headers:{"Content-Type":"multipart/form-data"}})).data.data}catch(n){throw console.error("Error importing points:",n),n}}async function Gs(e){try{return(await Pt.delete(`/channel/${e}`)).data.data}catch(t){throw console.error("Error deleting channel:",t),t}}async function sn(){try{return await pe("/channel/list","get",null)}catch(e){throw console.error("Error fetching channel list:",e),e}}async function Hs(e){try{return await pe(`/channel/${e}`,"get",null)}catch(t){throw console.error("Error fetching channel:",t),t}}async function zs(e,t){try{return await pe(`/channel/${e}`,"put",t)}catch(n){throw console.error("Error updating channel:",n),n}}async function js(e){try{return await pe(`/channel/reload_config/${e}`,"post",null)}catch(t){throw console.error("Error reloading device config:",t),t}}async function xs(){try{return await pe("/api/device-groups/tree","get",null)}catch(e){throw console.error("Error fetching device group tree:",e),e}}async function qs(){try{return await pe("/api/device-groups/","get",null)}catch(e){throw console.error("Error fetching device groups:",e),e}}async function Ws(e){try{return await pe(`/api/device-groups/${e}`,"get",null)}catch(t){throw console.error("Error fetching device group:",t),t}}async function Ys(e){try{return await pe("/api/device-groups/","post",e)}catch(t){throw console.error("Error creating device group:",t),t}}async function Js(e,t){try{return await pe(`/api/device-groups/${e}`,"put",t),!0}catch(n){throw console.error("Error updating device group:",n),n}}async function Xs(e,t=!1){try{return await Pt.delete(`/api/device-groups/${e}`,{params:{cascade:t}}),!0}catch(n){throw console.error("Error deleting device group:",n),n}}async function Zs(e,t){try{return await pe(`/api/device-groups/${e}/batch-operation`,"post",{group_id:e,operation:t})}catch(n){throw console.error("Error batch operating devices:",n),n}}const Qs={class:"dialog-footer"},er=L({__name:"AddDeviceDialog",props:{visible:{type:Boolean},channelId:{},initialGroupId:{}},emits:["update:visible","success","close"],setup(e,{emit:t}){const n=e,a=t,o=$(),l=$(),s=$(!1),d=$(""),u=$("network"),c=$(null),v=$([]),g=$([]),p=$([]),f=P(()=>!!n.channelId),r=P({get:()=>n.visible,set:S=>a("update:visible",S)}),i=Pe({code:"",name:"",protocol_type:1,conn_type:2,ip:"0.0.0.0",port:502,com_port:"",baud_rate:9600,data_bits:8,stop_bits:1,parity:"N",rtu_addr:"1",group_id:null}),h={code:[{required:!0,message:"",trigger:"blur"}],name:[{required:!0,message:"",trigger:"blur"}],port:[{required:!0,message:"",trigger:"blur"}]};Ce(async()=>{try{const S=await As();p.value=S.protocols,await E()}catch(S){console.error("",S)}}),q(()=>n.visible,async S=>{S&&(await C(),f.value||(b(),n.initialGroupId&&(i.group_id=n.initialGroupId)))}),q(()=>[n.visible,n.channelId],async([S,M])=>{S&&M&&await _(M)},{immediate:!0});const C=async()=>{v.value=await qs()},E=async()=>{g.value=await Ls()},_=async S=>{try{const M=await Hs(S);if(!M)return;Object.assign(i,M),d.value=M.name||"",u.value=M.conn_type===0||M.conn_type===3?"serial":"network"}catch(M){console.error("",M)}},b=()=>{Object.assign(i,{code:"",name:"",protocol_type:1,conn_type:2,ip:"0.0.0.0",port:502,com_port:"COM1",baud_rate:9600,data_bits:8,stop_bits:1,parity:"N",rtu_addr:"1",group_id:null}),c.value=null,l.value?.clearFiles()},O=async()=>{o.value&&await o.value.validate(async S=>{if(S){s.value=!0;try{let M;f.value&&n.channelId?(await zs(n.channelId,i),M=n.channelId,await js(n.channelId),ge.success("")):(M=(await Ms(i)).channel_id,ge.success("")),c.value&&await Us(M,c.value),a("success",i.name,f.value,d.value),r.value=!1}catch(M){ge.error(M.message||"")}finally{s.value=!1}}})},H=()=>{r.value=!1,a("close")};return(S,M)=>{const T=vn,F=_e,Y=gn;return w(),B(Y,{modelValue:r.value,"onUpdate:modelValue":M[2]||(M[2]=j=>r.value=j),title:f.value?"":"",width:"640px","close-on-click-modal":!1,onClose:H,class:"modern-dialog"},{footer:k(()=>[x("div",Qs,[y(F,{onClick:H,round:""},{default:k(()=>[...M[3]||(M[3]=[Z("",-1)])]),_:1}),y(F,{type:"primary",loading:s.value,onClick:O,round:"",class:"submit-btn",icon:m(ot)},{default:k(()=>[Z(he(f.value?"":""),1)]),_:1},8,["loading","icon"])])]),default:k(()=>[y(T,{ref_key:"formRef",ref:o,model:i,rules:h,"label-width":"110px","label-position":"right"},{default:k(()=>[y(Os,{"model-value":i,"group-options":v.value},null,8,["model-value","group-options"]),y(Rs,{"model-value":i,"media-type":u.value,"onUpdate:mediaType":M[0]||(M[0]=j=>u.value=j),protocols:p.value,"serial-ports":g.value},null,8,["model-value","media-type","protocols","serial-ports"]),y(Vs,{ref_key:"uploadCompRef",ref:l,onFileChange:M[1]||(M[1]=j=>c.value=j)},null,512)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),tr={class:"dialog-footer"},nr=L({__name:"AddDeviceGroupDialog",props:{visible:{type:Boolean},groupId:{},parentOptions:{}},emits:["update:visible","success","close"],setup(e,{emit:t}){const n=e,a=t,o=$(),l=$(!1),s=P(()=>!!n.groupId),d=P({get:()=>n.visible,set:f=>a("update:visible",f)}),u=Pe({code:"",name:"",parent_id:null,description:""}),c={code:[{required:!0,message:"",trigger:"blur"},{min:1,max:32,message:"1-32",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"//",trigger:"blur"}],name:[{required:!0,message:"",trigger:"blur"},{min:1,max:64,message:"1-64",trigger:"blur"}]};q(()=>[n.visible,n.groupId],async([f,r])=>{if(f&&r)try{const i=await Ws(r);i&&Object.assign(u,{code:i.code,name:i.name,parent_id:i.parent_id,description:i.description||""})}catch{}},{immediate:!0});const v=()=>{d.value=!1,g(),a("close")},g=()=>{Object.assign(u,{code:"",name:"",parent_id:null,description:""}),o.value?.resetFields()},p=async()=>{o.value&&await o.value.validate(async f=>{if(f){l.value=!0;try{s.value&&n.groupId?(await Js(n.groupId,{name:u.name,parent_id:u.parent_id,description:u.description}),ge.success("")):(await Ys(u),ge.success("")),a("success"),v()}catch(r){ge.error(r.message||"")}finally{l.value=!1}}})};return(f,r)=>{const i=Ot,h=lt,C=Vn,E=vn,_=_e,b=gn;return w(),B(b,{modelValue:d.value,"onUpdate:modelValue":r[4]||(r[4]=O=>d.value=O),title:s.value?"":"",width:"520px","close-on-click-modal":!1,onClose:v,class:"modern-dialog"},{footer:k(()=>[x("div",tr,[y(_,{onClick:v,round:""},{default:k(()=>[...r[5]||(r[5]=[Z("",-1)])]),_:1}),y(_,{type:"primary",loading:l.value,onClick:p,round:"",icon:m(ot)},{default:k(()=>[Z(he(s.value?"":""),1)]),_:1},8,["loading","icon"])])]),default:k(()=>[y(E,{ref_key:"formRef",ref:o,model:u,rules:c,"label-width":"100px","label-position":"right"},{default:k(()=>[y(h,{label:"",prop:"code"},{default:k(()=>[y(i,{modelValue:u.code,"onUpdate:modelValue":r[0]||(r[0]=O=>u.code=O),placeholder:" GROUP1",disabled:s.value},null,8,["modelValue","disabled"])]),_:1}),y(h,{label:"",prop:"name"},{default:k(()=>[y(i,{modelValue:u.name,"onUpdate:modelValue":r[1]||(r[1]=O=>u.name=O),placeholder:""},null,8,["modelValue"])]),_:1}),y(h,{label:"",prop:"parent_id"},{default:k(()=>[y(C,{modelValue:u.parent_id,"onUpdate:modelValue":r[2]||(r[2]=O=>u.parent_id=O),data:e.parentOptions,props:{label:"name",value:"id",children:"children"},placeholder:"","check-strictly":"",clearable:"",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),y(h,{label:"",prop:"description"},{default:k(()=>[y(i,{modelValue:u.description,"onUpdate:modelValue":r[3]||(r[3]=O=>u.description=O),type:"textarea",rows:3,placeholder:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),me=$(!1),et=Fo({history:Bo(),routes:[]});let wt=!1;wt||await or();async function or(){if(!wt)try{const e=await Vo();for(const t of e){const n={path:`/device/${t}`,name:t,meta:{title:t},component:()=>Un(()=>import("./Device-B7U8hgAn.js"),__vite__mapDeps([0,1,2]),import.meta.url)};et.addRoute(n)}wt=!0}catch(e){console.error("Error adding dynamic routes:",e)}}const ar=L({__name:"SideBar",setup(e){const t=Ao();$();const n=$(!1),a=$(!1),o=$(null),l=$(null),s=$(null),d=$([]),u=$([]),c=$([]),v=$(""),g=$(""),p=$(!0),f={children:"children",label:"label"},r=P(()=>{const K=R=>R.filter(J=>J.isGroup).map(J=>({id:J.id,code:"",name:J.name,parent_id:null,description:null,status:0,enable:!0,created_at:null,updated_at:null,children:J.children?K(J.children):[],devices:[]}));return K(d.value)}),i=K=>K.map(R=>{const J=[];return R.children?.length&&J.push(...i(R.children)),R.devices?.length&&J.push(...R.devices.map(fe=>({nodeKey:`device-${fe.id}`,label:fe.name,isGroup:!1,id:fe.id,name:fe.name,groupId:R.id}))),{nodeKey:`group-${R.id}`,label:R.name,isGroup:!0,id:R.id,name:R.name,children:J}}),h=async()=>{try{const K=await xs();d.value=i(K.groups||[]),u.value=K.ungrouped||[],g.value&&(v.value=`device-${g.value}`)}catch(K){ge.error(": "+K.message)}},C=K=>{K.isGroup||_(K.name)},E=K=>_(K.name),_=K=>{g.value=K,v.value=`device-${K}`;const R=`/device/${K}`;localStorage.setItem("activeRoute",R),t.push(R)},b=()=>{o.value=null,s.value=null,n.value=!0},O=K=>{l.value=null,s.value=K||null,a.value=!0},H=async(K,R)=>{({edit:()=>{l.value=R.id,a.value=!0},addDevice:()=>{s.value=R.id,n.value=!0},addSubGroup:()=>O(R.id),startAll:()=>S(R.id,"start"),stopAll:()=>S(R.id,"stop"),delete:()=>M(R)})[K]?.()},S=async(K,R)=>{try{await Zs(K,R),ge.success(`${R==="start"?"":""}`)}catch(J){ge.error(": "+J.message)}},M=async K=>{try{await xt.confirm(` "${K.name}"`,"",{type:"warning"}),await Xs(K.id,!1),ge.success(""),await h()}catch{}},T=K=>F(K.name),F=async K=>{const R=(await sn()).find(J=>J.name===K);R&&(o.value=R.id,n.value=!0)},Y=K=>j(K.name),j=async K=>{try{await xt.confirm(` "${K}"`,"",{type:"warning"});const R=(await sn()).find(J=>J.name===K);R&&(await Gs(R.id),window.location.reload())}catch{}},z=async(K,R,J)=>{R&&J&&J!==K&&et.removeRoute(J),et.addRoute({path:`/device/${K}`,name:K,component:()=>Un(()=>import("./Device-B7U8hgAn.js"),__vite__mapDeps([0,1,2]),import.meta.url)}),await h();let fe=!1;const N=G=>{for(const ae of G)if(ae.isGroup&&ae.children){if(ae.children.some(Lt=>!Lt.isGroup&&Lt.name===K)){c.value.includes(ae.nodeKey)||c.value.push(ae.nodeKey),fe=!0;return}if(N(ae.children),fe)return}};N(d.value),fe||u.value.some(ae=>ae.name===K)&&(p.value=!0),_(K)},ie=()=>h(),it=()=>{p.value=!p.value};return Ce(()=>{h();const K=localStorage.getItem("isCollapse");K&&(me.value=K==="true")}),q(()=>t.currentRoute.value.path,K=>{if(K.startsWith("/device/")){const R=K.split("/").pop()||"";g.value=R,v.value=`device-${R}`}},{immediate:!0}),(K,R)=>{const J=St,fe=ca;return w(),I(ce,null,[y(fe,{class:D(["sidebar",[`sidebar-theme-${m(De)}`,{"sidebar-collapsed":m(me)}]])},{default:k(()=>[y(J,null,{default:k(()=>[y(vs,{"is-collapse":m(me)},null,8,["is-collapse"]),y(Cs,{"is-collapse":m(me),onAddDevice:b,onAddGroup:R[0]||(R[0]=()=>O())},null,8,["is-collapse"]),y(Ns,{"tree-data":d.value,"tree-props":f,"expanded-keys":c.value,"current-node-key":v.value,"is-collapse":m(me),onNodeClick:C,onGroupCommand:H,onEditDevice:T,onDeleteDevice:Y},null,8,["tree-data","expanded-keys","current-node-key","is-collapse"]),y(Is,{"ungrouped-devices":u.value,expanded:p.value,"current-device-name":g.value,"is-collapse":m(me),onToggle:it,onDeviceClick:E,onEditDevice:F,onDeleteDevice:j},null,8,["ungrouped-devices","expanded","current-device-name","is-collapse"])]),_:1})]),_:1},8,["class"]),y(er,{visible:n.value,"onUpdate:visible":R[1]||(R[1]=N=>n.value=N),"channel-id":o.value,"initial-group-id":s.value,onSuccess:z,onClose:R[2]||(R[2]=N=>o.value=null)},null,8,["visible","channel-id","initial-group-id"]),y(nr,{visible:a.value,"onUpdate:visible":R[3]||(R[3]=N=>a.value=N),"group-id":l.value,"parent-options":r.value,onSuccess:ie,onClose:R[4]||(R[4]=N=>l.value=null)},null,8,["visible","group-id","parent-options"])],64)}}}),lr=we(ar,[["__scopeId","data-v-3854c9ca"]]),sr={__name:"AppHeader",setup(e){const t=Lo(),n=$([]),a=l=>{me.value=l,localStorage.setItem("isCollapse",me.value.toString())};return q(()=>t.path,()=>{n.value=t.matched.filter(l=>l.meta?.title)},{immediate:!0}),(l,s)=>{const d=le,u=Qo,c=Zo,v=ua;return w(),B(v,{class:"app-header"},{default:k(()=>[y(d,{onClick:s[0]||(s[0]=g=>a(!m(me)))},{default:k(()=>[Be(y(m(Mo),null,null,512),[[Ve,m(me)]]),Be(y(m(Uo),null,null,512),[[Ve,!m(me)]])]),_:1}),y(c,{separator:"/"},{default:k(()=>[(w(!0),I(ce,null,ke(n.value,(g,p)=>(w(),B(u,{key:p,to:g.path},{default:k(()=>[Z(he(g.meta.title),1)]),_:2},1032,["to"]))),128))]),_:1}),s[1]||(s[1]=x("div",{class:"breadcrumb-divider"},null,-1))]),_:1})}}},rr=we(sr,[["__scopeId","data-v-ed7c83fb"]]),ir={__name:"App",setup(e){return(t,n)=>{const a=Q("router-view"),o=St,l=pa,s=da;return w(),I("div",{class:D(`theme-wrapper theme-${m(De)}`)},[y(s,{class:"app-container"},{default:k(()=>[y(lr),y(s,{direction:"vertical"},{default:k(()=>[y(rr),y(l,{class:"main-content"},{default:k(()=>[y(o,null,{default:k(()=>[y(a)]),_:1})]),_:1})]),_:1})]),_:1})],2)}}},dr={install:e=>{e.directive("decimal",{mounted(t,n){const a=t.querySelector("input")||t,o=n.value||2,l=()=>{let d=a.value;d=d.replace(/[^\d.-]/g,"").replace(/(\..*)\./g,"$1").replace(/(\-.*)\-/g,"$1"),a.value=d},s=()=>{let d=a.value;if(d.includes(".")){const u=d.split(".");a.value=`${u[0]}.${u[1].slice(0,o)}`}};a.addEventListener("input",l),a.addEventListener("blur",s)}})}},rt=Go(ir);for(const[e,t]of Object.entries(Ho))rt.component(e,t);rt.use(dr);rt.use(et);rt.mount("#app");
