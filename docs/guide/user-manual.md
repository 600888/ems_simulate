# 用户使用手册 (User Manual)

本手册旨在指导用户如何使用 EMS Simulate 模拟器进行设备仿真、数据读取及协议测试。

---

## 1. 系统概览

EMS Simulate 是一个多协议支持的能源管理系统模拟器，支持以下核心功能：
- **多协议支持**：Modbus TCP/RTU, IEC104, DLT645。
- **设备仿真**：支持模拟服务端（Slave）和客户端。
- **实时监控**：提供报文捕获、测点值实时更新及状态显示。
- **灵活配置**：支持手动读取、自动读取及其间隔配置。

---

## 2. 快速入门

### 2.1 启动程序
1. 启动后端服务：在根目录运行 `python start_back_end.py`。
2. 启动前端界面：在 `front` 目录运行 `npm run dev` 或访问已部署的地址。

### 2.2 创建首个仿真通道
1. 进入“通道管理”页面。
2. 点击“添加通道”，选择协议类型并配置端口/串口参数。
3. 启动通道。

---

## 3. 设备与从机管理

### 3.1 设备详情
点击通道进入设备详情页，您可以查看该通道下的所有模拟设备。

### 3.2 管理从机 (Slave)
- **添加从机**：在设备详情页点击“+”标签添加新的从机 ID。
- **切换从机**：通过顶部标签页在不同从机之间快速切换。

---

## 4. 测点管理 (Points)

### 4.1 添加测点
1. 在从机页面点击“添加测点”按钮。
2. 输入测点名称、地址、寄存器类型、解析码等参数。
3. 保存后，测点将显示在数据表格中。

### 4.2 编辑与删除
- 点击表格行末尾的“操作”按钮进行修改或删除。
- 支持批量清空当前从机的所有测点。

---

## 5. 仿真与读取控制

### 5.1 自动读取
- 开启顶部“自动读取”开关，系统将按预设频率刷新所有测点数据。

### 5.2 手动读取
- 在自动读取关闭时，点击“手动读取”触发单次全量扫描。
- **读取间隔**：支持配置 10ms - 5000ms 的读取间隔，防止对端设备压力过大。
- **取消读取**：读取过程中可随时点击“取消读取”停止操作。

---

## 6. 协议高级功能

### 6.1 Modbus 报文捕获
- 自动记录请求与响应报文，支持十六进制显示。
- **异常捕获**：支持捕获并解析 Modbus 标准异常响应码。

### 6.2 实时数据更新
- 数据表格支持实时上报显示，配合 WebSocket 实现无感刷新。

---

## 7. 常见问题 (FAQ)

- **Q: 为什么通道启动失败？**
  - A: 请检查端口是否被占用，或串口参数是否正确。
- **Q: 为什么测点值为“错误”？**
  - A: 请检查解析码配置是否与实际数据格式匹配。

---

## 8. 版本信息
当前版本：v1.0.0
最后更新：2026-02-03
